# Phase 3: Next.js å‰ç«¯æ”¹é€  - UI è®¾è®¡è¯¦ç»†æŠ¥å‘Š

## æ–‡æ¡£ä¿¡æ¯

- **é¡¹ç›®**: AI ç ”ç©¶åŠ©æ‰‹
- **é˜¶æ®µ**: Phase 3 - Next.js å‰ç«¯æ”¹é€ 
- **ç‰ˆæœ¬**: 1.0
- **åˆ›å»ºæ—¥æœŸ**: 2025-10-31
- **è®¾è®¡åŸºå‡†**: ç°æœ‰ AI Chatbot UI (achive/ai-chatbot-main)
- **çŠ¶æ€**: å¾…å®æ–½

---

## ç›®å½•

1. [è®¾è®¡æ¦‚è¿°](#è®¾è®¡æ¦‚è¿°)
2. [å®Œæ•´ç”¨æˆ·æ—…ç¨‹](#å®Œæ•´ç”¨æˆ·æ—…ç¨‹)
3. [ç»„ä»¶å±‚çº§æ¶æ„](#ç»„ä»¶å±‚çº§æ¶æ„)
4. [æ•°æ®æµè®¾è®¡](#æ•°æ®æµè®¾è®¡)
5. [è¯¦ç»† UI è®¾è®¡](#è¯¦ç»†-ui-è®¾è®¡)
6. [å…³é”®ç»„ä»¶å®ç°](#å…³é”®ç»„ä»¶å®ç°)
7. [æ ·å¼è®¾è®¡è§„èŒƒ](#æ ·å¼è®¾è®¡è§„èŒƒ)
8. [äº¤äº’åŠ¨ç”»è®¾è®¡](#äº¤äº’åŠ¨ç”»è®¾è®¡)
9. [å“åº”å¼è®¾è®¡](#å“åº”å¼è®¾è®¡)
10. [éªŒæ”¶æ ‡å‡†](#éªŒæ”¶æ ‡å‡†)

---

## è®¾è®¡æ¦‚è¿°

### æ ¸å¿ƒè®¾è®¡åŸåˆ™

**1. é›¶ä¾µå…¥æ€§**
- ä¸ä¿®æ”¹ç°æœ‰çš„ Messages/PreviewMessage/MessageActions ç»„ä»¶
- åœ¨ Chat ç»„ä»¶çº§åˆ«æ·»åŠ ç ”ç©¶åŠŸèƒ½
- ä¿æŒç°æœ‰äº¤äº’æ¨¡å¼ä¸å˜

**2. è§†è§‰ä¸€è‡´æ€§**
- éµå¾ªç°æœ‰ UI çš„è®¾è®¡è¯­è¨€
- ä½¿ç”¨ç›¸åŒçš„é¢œè‰²ç³»ç»Ÿã€å­—ä½“ã€é—´è·
- åŒ¹é…ç°æœ‰æŒ‰é’®å’Œå¡ç‰‡æ ·å¼

**3. ç”¨æˆ·ä½“éªŒä¼˜å…ˆ**
- ç ”ç©¶æŒ‰é’®è‡ªåŠ¨æ£€æµ‹å¹¶æ˜¾ç¤º
- å®æ—¶è¿›åº¦åé¦ˆ
- æ— ç¼é›†æˆ Artifact å±•ç¤º

**4. æ€§èƒ½ä¼˜åŒ–**
- ä½¿ç”¨ React.memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- SSE è¿æ¥ç”Ÿå‘½å‘¨æœŸæ¸…æ™°ç®¡ç†
- çŠ¶æ€æ›´æ–°èŠ‚æµå¤„ç†

---

## å®Œæ•´ç”¨æˆ·æ—…ç¨‹

### ğŸ¬ ç«¯åˆ°ç«¯ç”¨æˆ·æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç”¨æˆ·æ—…ç¨‹æ—¶é—´çº¿                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  T0: ç”¨æˆ·æ‰“å¼€åº”ç”¨                                                 â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”‚  [åˆå§‹ç•Œé¢]                                                    â”‚
â”‚  â”‚  - Hello there! How can I help you today?                     â”‚
â”‚  â”‚  - å»ºè®®é—®é¢˜å¡ç‰‡ x 4                                            â”‚
â”‚  â”‚  - è¾“å…¥æ¡†                                                      â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€> T1: ç”¨æˆ·è¾“å…¥ç ”ç©¶é—®é¢˜ (0:00)                                  â”‚
â”‚  â”‚   è¾“å…¥: "è¯·å¸®æˆ‘ç ”ç©¶ä¸€ä¸‹ React Server Components çš„æœ€ä½³å®è·µ"     â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”‚  [ç”¨æˆ·æ¶ˆæ¯æ˜¾ç¤º]                                                â”‚
â”‚  â”‚  - è“è‰²æ°”æ³¡ï¼Œå³å¯¹é½                                            â”‚
â”‚  â”‚  - [Copy] [Edit] æŒ‰é’®ï¼ˆhover æ˜¾ç¤ºï¼‰                           â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€> T2: AI ç†è§£å¹¶å›å¤ (0:02)                                    â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”‚  [AI å›å¤æ¶ˆæ¯]                                                 â”‚
â”‚  â”‚  - Sparkles å¤´åƒ                                              â”‚
â”‚  â”‚  - "æˆ‘ç†è§£æ‚¨æƒ³ç ”ç©¶ React Server Components çš„æœ€ä½³å®è·µã€‚       â”‚
â”‚  â”‚     ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®å¼€å§‹æ·±åº¦ç ”ç©¶ï¼Œæˆ‘å°†ä¸ºæ‚¨ç”Ÿæˆè¯¦ç»†çš„æŠ¥å‘Šã€‚"       â”‚
â”‚  â”‚  - [Copy] [ğŸ‘] [ğŸ‘] æ“ä½œæŒ‰é’®                                  â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€> T3: ResearchButton è‡ªåŠ¨æ˜¾ç¤º (0:02)                          â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”‚  [ç ”ç©¶æŒ‰é’®å‡ºç°] (åœ¨è¾“å…¥æ¡†ä¸Šæ–¹ï¼Œsticky å®šä½)                     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  â”‚  âœ¨ Start Research                     â”‚                   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”‚  - æ¸å…¥åŠ¨ç”» (fade in)                                          â”‚
â”‚  â”‚  - ä½ç½®å›ºå®šï¼Œä¸éšæ»šåŠ¨ç§»åŠ¨                                      â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€> T4: ç”¨æˆ·ç‚¹å‡»æŒ‰é’® (0:05)                                     â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”‚  [æŒ‰é’®çŠ¶æ€å˜åŒ–]                                                â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  â”‚  â³ Starting research...     [disabled] â”‚                   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”‚  - æŒ‰é’® scale åŠ¨ç”»                                             â”‚
â”‚  â”‚  - æ–‡æœ¬å˜ä¸º "Starting research..."                            â”‚
â”‚  â”‚  - æŒ‰é’®ç¦ç”¨ï¼Œé˜²æ­¢é‡å¤ç‚¹å‡»                                      â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€> T5: SSE è¿æ¥å»ºç«‹ (0:06)                                     â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”‚  [è¿›åº¦ç»„ä»¶æ˜¾ç¤º]                                                â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  â”‚  ğŸ”„ Connecting to research service...  â”‚                   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€> T6: ç ”ç©¶è¿›è¡Œä¸­ (0:08 - 2:00)                                â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”‚  [å®æ—¶è¿›åº¦æ›´æ–°]                                                â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  â”‚  ğŸ“Š Research Progress                   â”‚                  â”‚
â”‚  â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 35%              â”‚                  â”‚
â”‚  â”‚  â”‚                                         â”‚                  â”‚
â”‚  â”‚  â”‚  âœ… Planning research strategy          â”‚                  â”‚
â”‚  â”‚  â”‚     â†’ Identified 5 key areas            â”‚                  â”‚
â”‚  â”‚  â”‚                                         â”‚                  â”‚
â”‚  â”‚  â”‚  âœ… Searching React documentation       â”‚                  â”‚
â”‚  â”‚  â”‚     â†’ Found 12 relevant articles        â”‚                  â”‚
â”‚  â”‚  â”‚                                         â”‚                  â”‚
â”‚  â”‚  â”‚  ğŸ”„ Analyzing community best practices  â”‚                  â”‚
â”‚  â”‚  â”‚     â†’ Processing GitHub discussions     â”‚                  â”‚
â”‚  â”‚  â”‚                                         â”‚                  â”‚
â”‚  â”‚  â”‚  â³ Synthesizing findings...            â”‚                  â”‚
â”‚  â”‚  â”‚                                         â”‚                  â”‚
â”‚  â”‚  â”‚  â¹ï¸ Generating report...                â”‚                  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚  â”‚  - æ¯ä¸ªæ­¥éª¤å®æ—¶æ›´æ–°                                            â”‚
â”‚  â”‚  - è¿›åº¦æ¡å¹³æ»‘è¿‡æ¸¡                                              â”‚
â”‚  â”‚  - ç™¾åˆ†æ¯”åŠ¨æ€æ˜¾ç¤º                                              â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€> T7: ç ”ç©¶å®Œæˆ (2:00)                                         â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”‚  [è¿›åº¦ç»„ä»¶æœ€ç»ˆçŠ¶æ€]                                            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  â”‚  âœ… Research Complete                   â”‚                  â”‚
â”‚  â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100%             â”‚                  â”‚
â”‚  â”‚  â”‚                                         â”‚                  â”‚
â”‚  â”‚  â”‚  âœ… All steps completed                 â”‚                  â”‚
â”‚  â”‚  â”‚  ğŸ“„ Sending report to AI...             â”‚                  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚  â”‚  - å®ŒæˆåŠ¨ç”» (check mark)                                       â”‚
â”‚  â”‚  - 2 ç§’åè‡ªåŠ¨æ¶ˆå¤±                                              â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€> T8: è‡ªåŠ¨å‘é€æŠ¥å‘Šç»™ AI (2:01)                                â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”‚  [æ–°æ¶ˆæ¯å‡ºç°]                                                  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  â”‚ ğŸ‘¤ User [Auto-sent]         2:01 PM    â”‚                   â”‚
â”‚  â”‚  â”‚                                        â”‚                   â”‚
â”‚  â”‚  â”‚ Research completed:                    â”‚                   â”‚
â”‚  â”‚  â”‚                                        â”‚                   â”‚
â”‚  â”‚  â”‚ [ç ”ç©¶æŠ¥å‘Šå†…å®¹...]                       â”‚                   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”‚  - æ·¡è“è‰²èƒŒæ™¯æ ‡è¯†è‡ªåŠ¨å‘é€                                      â”‚
â”‚  â”‚  - [Auto-sent] æ ‡ç­¾                                           â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€> T9: AI å¤„ç†æŠ¥å‘Š (2:02)                                      â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”‚  [AI æ€è€ƒä¸­]                                                   â”‚
â”‚  â”‚  - "Thinking..." åŠ¨ç”»                                         â”‚
â”‚  â”‚  - Sparkles å›¾æ ‡æ—‹è½¬                                          â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€> T10: AI åˆ›å»º Artifact (2:05)                                â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”‚  [AI å›å¤]                                                     â”‚
â”‚  â”‚  "æˆ‘å·²ç»ä¸ºæ‚¨åˆ›å»ºäº†è¯¦ç»†çš„ç ”ç©¶æŠ¥å‘Šï¼Œç‚¹å‡»å³ä¾§æŸ¥çœ‹å®Œæ•´å†…å®¹ã€‚"       â”‚
â”‚  â”‚  [Copy] [ğŸ‘] [ğŸ‘]                                             â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”‚  [Artifact å…¨å±å±•ç¤º]                                           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  â”‚ Chat     â”‚ ğŸ“„ React Server Components      â”‚              â”‚
â”‚  â”‚  â”‚ (400px)  â”‚    Best Practices               â”‚              â”‚
â”‚  â”‚  â”‚          â”‚                         [Ã— å…³é—­] â”‚              â”‚
â”‚  â”‚  â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚  â”‚  â”‚          â”‚                                 â”‚              â”‚
â”‚  â”‚  â”‚          â”‚ # React Server Components...    â”‚              â”‚
â”‚  â”‚  â”‚          â”‚                                 â”‚              â”‚
â”‚  â”‚  â”‚          â”‚ ## 1. æ ¸å¿ƒæ¦‚å¿µ                  â”‚              â”‚
â”‚  â”‚  â”‚          â”‚ ...                             â”‚              â”‚
â”‚  â”‚  â”‚          â”‚                                 â”‚              â”‚
â”‚  â”‚  â”‚          â”‚ [ğŸ“‹ Copy] [ğŸ’¾ Export]           â”‚              â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚  â”‚  - æ»‘å…¥åŠ¨ç”» (slide in from right)                             â”‚
â”‚  â”‚  - èŠå¤©åŒºåŸŸå‹ç¼©åˆ° 400px                                        â”‚
â”‚  â”‚  - Artifact å æ®å‰©ä½™ç©ºé—´                                      â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”œâ”€> T11: ç”¨æˆ·è¿½é—® (2:10)                                        â”‚
â”‚  â”‚   è¾“å…¥: "èƒ½å¦è¡¥å……ä¸€äº›å®é™…çš„ä»£ç ç¤ºä¾‹ï¼Ÿ"                          â”‚
â”‚  â”‚                                                                â”‚
â”‚  â”‚  [AI æ›´æ–° Artifact]                                           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  â”‚          â”‚ ğŸ“„ React Server Components      â”‚              â”‚
â”‚  â”‚  â”‚          â”‚    Best Practices [Updated]     â”‚              â”‚
â”‚  â”‚  â”‚          â”‚                                 â”‚              â”‚
â”‚  â”‚  â”‚          â”‚ ...                             â”‚              â”‚
â”‚  â”‚  â”‚          â”‚                                 â”‚              â”‚
â”‚  â”‚  â”‚          â”‚ ## 4. å®æˆ˜æ¡ˆä¾‹ â­ NEW           â”‚              â”‚
â”‚  â”‚  â”‚          â”‚                                 â”‚              â”‚
â”‚  â”‚  â”‚          â”‚ ```typescript                   â”‚              â”‚
â”‚  â”‚  â”‚          â”‚ // Server Component             â”‚              â”‚
â”‚  â”‚  â”‚          â”‚ async function UserProfile...   â”‚              â”‚
â”‚  â”‚  â”‚          â”‚ ```                             â”‚              â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚  â”‚  - [Updated] æ ‡ç­¾é—ªçƒ                                         â”‚
â”‚  â”‚  - æ–°å†…å®¹é«˜äº®æ˜¾ç¤º (2 ç§’)                                       â”‚
â”‚  â”‚  - æ»šåŠ¨åˆ°æ–°å¢å†…å®¹ä½ç½®                                          â”‚
â”‚  â”‚                                                                â”‚
â”‚  â””â”€> T12: ç”¨æˆ·æ»¡æ„ï¼Œå…³é—­ Artifact (2:15)                        â”‚
â”‚                                                                   â”‚
â”‚      [Artifact æ»‘å‡º]                                              â”‚
â”‚      - æ»‘å‡ºåŠ¨ç”» (slide out to right)                              â”‚
â”‚      - èŠå¤©åŒºåŸŸæ¢å¤å…¨å®½                                            â”‚
â”‚      - å†å²è®°å½•ä¿æŒå¯è®¿é—®                                          â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç»„ä»¶å±‚çº§æ¶æ„

### ğŸ—ï¸ å®Œæ•´ç»„ä»¶æ ‘

```
app/(chat)/[id]/page.tsx
â”‚
â””â”€> Chat ç»„ä»¶ (components/chat.tsx)
    â”‚
    â”œâ”€> useChat Hook (AI SDK)
    â”‚   â”œâ”€â”€ messages: ChatMessage[]
    â”‚   â”œâ”€â”€ sendMessage: (msg) => void  â­ å…³é”® API
    â”‚   â”œâ”€â”€ status: 'idle' | 'submitted' | 'streaming'
    â”‚   â””â”€â”€ regenerate, stop, resumeStream
    â”‚
    â”œâ”€> ç ”ç©¶çŠ¶æ€ç®¡ç† (æ–°å¢)
    â”‚   â”œâ”€â”€ researchPrompt: string | null
    â”‚   â”œâ”€â”€ showResearchUI: boolean
    â”‚   â”œâ”€â”€ lastAiMessage: ChatMessage | undefined
    â”‚   â””â”€â”€ shouldShowResearchButton: boolean
    â”‚
    â”œâ”€> useResearchProgress Hook (æ–°å¢)
    â”‚   â”œâ”€â”€ events: ProgressEvent[]
    â”‚   â”œâ”€â”€ status: ResearchStatus
    â”‚   â”œâ”€â”€ report: string | null
    â”‚   â””â”€â”€ error: string | null
    â”‚
    â”œâ”€> å¸ƒå±€ç»“æ„
    â”‚   â”‚
    â”‚   â”œâ”€> ChatHeader
    â”‚   â”‚   â””â”€â”€ æ ‡é¢˜ã€æ¨¡å‹é€‰æ‹©ã€å¯è§æ€§è®¾ç½®
    â”‚   â”‚
    â”‚   â”œâ”€> Messages ç»„ä»¶ (ä¸ä¿®æ”¹)
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€> æ¶ˆæ¯å®¹å™¨ (å¯æ»šåŠ¨åŒºåŸŸ)
    â”‚   â”‚       â”‚
    â”‚   â”‚       â”œâ”€> Greeting (ç©ºçŠ¶æ€)
    â”‚   â”‚       â”‚
    â”‚   â”‚       â””â”€> PreviewMessage (å¾ªç¯æ¸²æŸ“)
    â”‚   â”‚           â”‚
    â”‚   â”‚           â”œâ”€> å¤´åƒ (AI: Sparkles, User: none)
    â”‚   â”‚           â”‚
    â”‚   â”‚           â”œâ”€> æ¶ˆæ¯å†…å®¹
    â”‚   â”‚           â”‚   â”œâ”€â”€ Text parts
    â”‚   â”‚           â”‚   â”œâ”€â”€ Attachments
    â”‚   â”‚           â”‚   â”œâ”€â”€ Tool results (weather, documents)
    â”‚   â”‚           â”‚   â””â”€â”€ Reasoning
    â”‚   â”‚           â”‚
    â”‚   â”‚           â””â”€> MessageActions
    â”‚   â”‚               â”œâ”€â”€ Copy
    â”‚   â”‚               â”œâ”€â”€ Edit (ç”¨æˆ·æ¶ˆæ¯)
    â”‚   â”‚               â”œâ”€â”€ Upvote (AI æ¶ˆæ¯)
    â”‚   â”‚               â””â”€â”€ Downvote (AI æ¶ˆæ¯)
    â”‚   â”‚
    â”‚   â”œâ”€> ResearchPanel (æ–°å¢ï¼Œsticky å®šä½)
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€> æ¡ä»¶æ¸²æŸ“
    â”‚   â”‚       â”‚
    â”‚   â”‚       â”œâ”€> ResearchButton (ç ”ç©¶æœªå¼€å§‹æ—¶)
    â”‚   â”‚       â”‚   â”œâ”€â”€ Sparkles å›¾æ ‡
    â”‚   â”‚       â”‚   â”œâ”€â”€ "Start Research" æ–‡æœ¬
    â”‚   â”‚       â”‚   â””â”€â”€ onClick å¤„ç†
    â”‚   â”‚       â”‚
    â”‚   â”‚       â””â”€> ResearchProgress (ç ”ç©¶è¿›è¡Œä¸­)
    â”‚   â”‚           â”œâ”€â”€ æ ‡é¢˜æ 
    â”‚   â”‚           â”œâ”€â”€ è¿›åº¦æ¡ (ç™¾åˆ†æ¯”)
    â”‚   â”‚           â”œâ”€â”€ æ­¥éª¤åˆ—è¡¨
    â”‚   â”‚           â”‚   â”œâ”€â”€ start äº‹ä»¶
    â”‚   â”‚           â”‚   â”œâ”€â”€ plan äº‹ä»¶
    â”‚   â”‚           â”‚   â”œâ”€â”€ progress äº‹ä»¶ (å¤šä¸ª)
    â”‚   â”‚           â”‚   â”œâ”€â”€ done äº‹ä»¶
    â”‚   â”‚           â”‚   â””â”€â”€ error äº‹ä»¶ (å¦‚æœ‰)
    â”‚   â”‚           â””â”€â”€ çŠ¶æ€å›¾æ ‡
    â”‚   â”‚
    â”‚   â””â”€> MultimodalInput (ä¸ä¿®æ”¹)
    â”‚       â”œâ”€â”€ è¾“å…¥æ¡†
    â”‚       â”œâ”€â”€ é™„ä»¶æŒ‰é’®
    â”‚       â”œâ”€â”€ æ¨¡å‹é€‰æ‹©å™¨
    â”‚       â””â”€â”€ å‘é€æŒ‰é’®
    â”‚
    â””â”€> Artifact ç»„ä»¶ (ä¸ä¿®æ”¹)
        â”œâ”€â”€ å…³é—­æŒ‰é’®
        â”œâ”€â”€ æ ‡é¢˜æ 
        â”œâ”€â”€ å†…å®¹åŒºåŸŸ
        â”‚   â”œâ”€â”€ TextArtifact
        â”‚   â”œâ”€â”€ CodeArtifact
        â”‚   â”œâ”€â”€ ImageArtifact
        â”‚   â””â”€â”€ SheetArtifact
        â””â”€â”€ æ“ä½œæ 
            â”œâ”€â”€ Copy
            â”œâ”€â”€ Export
            â””â”€â”€ Regenerate
```

### ğŸ“¦ æ–°å¢ç»„ä»¶è¯¦ç»†è¯´æ˜

#### 1. ResearchPanel ç»„ä»¶ (æ–°å¢)

**æ–‡ä»¶**: `components/research-panel.tsx`

**èŒè´£**:
- ç»Ÿä¸€ç®¡ç† ResearchButton å’Œ ResearchProgress çš„æ˜¾ç¤º
- å¤„ç†å¸ƒå±€å’Œæ ·å¼
- æä¾›ä¸€è‡´çš„åŠ¨ç”»æ•ˆæœ

**Props**:
```typescript
interface ResearchPanelProps {
  prompt: string;
  isActive: boolean;
  events: ProgressEvent[];
  status: ResearchStatus;
  onStart: (prompt: string) => void;
}
```

#### 2. ResearchButton ç»„ä»¶ (æ–°å¢)

**æ–‡ä»¶**: `components/research-button.tsx`

**èŒè´£**:
- æ˜¾ç¤ºç ”ç©¶æŒ‰é’®
- å¤„ç†ç‚¹å‡»äº‹ä»¶
- ç®¡ç†æŒ‰é’®çŠ¶æ€ (idle/starting/disabled)

**Props**:
```typescript
interface ResearchButtonProps {
  prompt: string;
  onStart: (prompt: string) => void;
  disabled?: boolean;
}
```

#### 3. ResearchProgress ç»„ä»¶ (æ–°å¢)

**æ–‡ä»¶**: `components/research-progress.tsx`

**èŒè´£**:
- æ˜¾ç¤ºç ”ç©¶è¿›åº¦
- æ¸²æŸ“æ­¥éª¤åˆ—è¡¨
- æ˜¾ç¤ºè¿›åº¦æ¡å’Œç™¾åˆ†æ¯”

**Props**:
```typescript
interface ResearchProgressProps {
  events: ProgressEvent[];
  status: ResearchStatus;
}
```

#### 4. useResearchProgress Hook (æ–°å¢)

**æ–‡ä»¶**: `hooks/use-research-progress.ts`

**èŒè´£**:
- ç®¡ç† SSE è¿æ¥
- å¤„ç†äº‹ä»¶æµ
- ç»´æŠ¤è¿›åº¦çŠ¶æ€
- è§¦å‘å®Œæˆå›è°ƒ

**ç­¾å**:
```typescript
function useResearchProgress(props: {
  prompt: string | null;
  onComplete?: (report: string) => void;
}): {
  events: ProgressEvent[];
  status: ResearchStatus;
  report: string | null;
  error: string | null;
}
```

---

## æ•°æ®æµè®¾è®¡

### ğŸ”„ å®Œæ•´æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Phase 3 æ•°æ®æµ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·    â”‚       â”‚  Chat    â”‚       â”‚  Hook    â”‚       â”‚  API     â”‚
â”‚  æ“ä½œ    â”‚       â”‚  ç»„ä»¶    â”‚       â”‚          â”‚       â”‚  Route   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚ 1. è¾“å…¥ç ”ç©¶é—®é¢˜  â”‚                  â”‚                  â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚ 2. sendMessage   â”‚                  â”‚
      â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚ 3. POST /api/chatâ”‚
      â”‚                 â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚ 4. AI å›å¤æµ      â”‚                  â”‚
      â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚ 5. æ˜¾ç¤º AI æ¶ˆæ¯  â”‚                  â”‚                  â”‚
      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚ 6. æ£€æµ‹å…³é”®è¯     â”‚                  â”‚
      â”‚                 â”‚    detectResearch â”‚                  â”‚
      â”‚                 â”‚    Keywords()    â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚ 7. æ˜¾ç¤ºç ”ç©¶æŒ‰é’®  â”‚                  â”‚                  â”‚
      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚ 8. ç‚¹å‡»æŒ‰é’®      â”‚                  â”‚                  â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚ 9. setResearch   â”‚                  â”‚
      â”‚                 â”‚    Prompt(prompt)â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚ 10. useEffect    â”‚
      â”‚                 â”‚                  â”‚     è§¦å‘         â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚ 11. fetchEvent   â”‚
      â”‚                 â”‚                  â”‚     Source       â”‚
      â”‚                 â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚ 12. Proxy
      â”‚                 â”‚                  â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€>
      â”‚                 â”‚                  â”‚                  â”‚    FastAPI
      â”‚                 â”‚                  â”‚                  â”‚    Backend
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚ 13. SSE Stream   â”‚
      â”‚                 â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚ 14. events æ›´æ–°   â”‚                  â”‚
      â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚ 15. æ˜¾ç¤ºè¿›åº¦     â”‚                  â”‚                  â”‚
      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚ 16. done event   â”‚
      â”‚                 â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚ 17. onComplete() â”‚
      â”‚                 â”‚                  â”‚     callback     â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚ 18. sendMessage  â”‚                  â”‚
      â”‚                 â”‚     (report)     â”‚                  â”‚
      â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚ 19. POST /api/chat (report)         â”‚
      â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚ 20. AI å¤„ç†æŠ¥å‘Š   â”‚                  â”‚
      â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚ 21. è°ƒç”¨         â”‚                  â”‚
      â”‚                 â”‚     createDocumentâ”‚                  â”‚
      â”‚                 â”‚     å·¥å…·         â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚                 â”‚ 22. DataStream   â”‚                  â”‚
      â”‚                 â”‚     data-* eventsâ”‚                  â”‚
      â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚                 â”‚                  â”‚                  â”‚
      â”‚ 23. Artifact æ˜¾ç¤ºâ”‚                  â”‚                  â”‚
      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚
      â”‚                 â”‚                  â”‚                  â”‚
```

### ğŸ“Š çŠ¶æ€ç®¡ç†æµç¨‹

#### Chat ç»„ä»¶çŠ¶æ€

```typescript
// components/chat.tsx

export function Chat({ ... }) {
  // ========== AI SDK çŠ¶æ€ ==========
  const {
    messages,        // ChatMessage[] - æ‰€æœ‰æ¶ˆæ¯
    sendMessage,     // (msg) => void - å‘é€æ¶ˆæ¯ç»™ AI
    status,          // 'idle' | 'submitted' | 'streaming'
    stop,            // () => void - åœæ­¢ç”Ÿæˆ
    regenerate,      // () => void - é‡æ–°ç”Ÿæˆ
    setMessages,     // (msgs) => void - è®¾ç½®æ¶ˆæ¯
  } = useChat({ ... });

  // ========== ç ”ç©¶çŠ¶æ€ (æ–°å¢) ==========
  const [researchPrompt, setResearchPrompt] = useState<string | null>(null);
  const [showResearchUI, setShowResearchUI] = useState(false);

  // ========== æ´¾ç”ŸçŠ¶æ€ ==========
  const lastAiMessage = useMemo(() => {
    return messages
      .filter(m => m.role === 'assistant')
      .pop();
  }, [messages]);

  const shouldShowResearchButton = useMemo(() => {
    return lastAiMessage &&
           detectResearchKeywords(lastAiMessage.content) &&
           !researchPrompt;
  }, [lastAiMessage, researchPrompt]);

  // ========== ç ”ç©¶ Hook ==========
  const { events, status: researchStatus, report, error } = useResearchProgress({
    prompt: researchPrompt,
    onComplete: (report) => {
      // å‘é€æŠ¥å‘Šç»™ AI
      sendMessage({
        role: 'user',
        parts: [{
          type: 'text',
          text: `Research completed:\n\n${report}`
        }]
      });

      // æ¸…ç†çŠ¶æ€
      setResearchPrompt(null);
      setShowResearchUI(false);
    }
  });

  // ========== äº‹ä»¶å¤„ç† ==========
  const handleStartResearch = useCallback((prompt: string) => {
    setResearchPrompt(prompt);
    setShowResearchUI(true);
  }, []);

  // ... æ¸²æŸ“é€»è¾‘
}
```

#### useResearchProgress Hook çŠ¶æ€

```typescript
// hooks/use-research-progress.ts

export function useResearchProgress({ prompt, onComplete }) {
  // ========== çŠ¶æ€å®šä¹‰ ==========
  const [events, setEvents] = useState<ProgressEvent[]>([]);
  const [status, setStatus] = useState<ResearchStatus>('idle');
  const [report, setReport] = useState<string | null>(null);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    if (!prompt) return;

    // ========== è¿æ¥ç®¡ç† ==========
    const abortController = new AbortController();

    const startResearch = async () => {
      setStatus('running');
      setEvents([]);
      setError(null);

      try {
        await fetchEventSource('/api/research/stream', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt }),
          signal: abortController.signal,

          // ========== äº‹ä»¶å¤„ç† ==========
          onopen: async (response) => {
            if (response.ok) {
              console.log('SSE connected');
            } else {
              throw new Error(`SSE error: ${response.status}`);
            }
          },

          onmessage: (event) => {
            const data = JSON.parse(event.data);
            const progressEvent: ProgressEvent = {
              type: event.event,
              data,
            };

            // æ·»åŠ äº‹ä»¶åˆ°åˆ—è¡¨
            setEvents(prev => [...prev, progressEvent]);

            // æ ¹æ®äº‹ä»¶ç±»å‹æ›´æ–°çŠ¶æ€
            switch (event.event) {
              case 'start':
                setStatus('running');
                break;

              case 'done':
                setStatus('completed');
                setReport(data.report);

                // è§¦å‘å®Œæˆå›è°ƒ
                if (onComplete) {
                  onComplete(data.report);
                }
                break;

              case 'error':
                setStatus('failed');
                setError(data.message);
                break;
            }
          },

          onerror: (err) => {
            console.error('SSE error:', err);
            setStatus('failed');
            setError('Connection failed');
            throw err;
          },
        });
      } catch (err) {
        console.error('Research error:', err);
        setStatus('failed');
        setError('Research failed');
      }
    };

    startResearch();

    // ========== æ¸…ç† ==========
    return () => {
      abortController.abort();
      setStatus('idle');
    };
  }, [prompt, onComplete]);

  return { events, status, report, error };
}
```

---

## è¯¦ç»† UI è®¾è®¡

### ğŸ¨ å„é˜¶æ®µ UI è¯¦ç»†è®¾è®¡

#### é˜¶æ®µ 1: åˆå§‹çŠ¶æ€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Chatbot                                            [Account]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚                         Hello there!                              â”‚
â”‚                    How can I help you today?                      â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ What are the advantages of â”‚  â”‚ Write code to demonstrate  â”‚ â”‚
â”‚  â”‚ using Next.js?             â”‚  â”‚ Dijkstra's algorithm       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Help me write an essay     â”‚  â”‚ What is the weather in     â”‚ â”‚
â”‚  â”‚ about Silicon Valley       â”‚  â”‚ San Francisco?             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚                                                                   â”‚
â”‚                                                                   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Send a message...                                     [Send]â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚ [ğŸ“] [ğŸ¨ Model Selector â–¼]                                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CSS ç±»å:
- å®¹å™¨: "flex h-dvh flex-col bg-background"
- æ¬¢è¿åŒº: "flex-1 flex items-center justify-center"
- æ ‡é¢˜: "text-2xl font-semibold"
- å‰¯æ ‡é¢˜: "text-muted-foreground"
- å»ºè®®å¡ç‰‡: "rounded-lg border p-4 hover:bg-muted cursor-pointer"
- è¾“å…¥åŒº: "sticky bottom-0 border-t bg-background p-4"
```

#### é˜¶æ®µ 2: ç”¨æˆ·è¾“å…¥ + AI å›å¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Chatbot                                            [Account]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  [æ¶ˆæ¯å†å²åŒºåŸŸ - å¯æ»šåŠ¨]                                          â”‚
â”‚                                                                   â”‚
â”‚                            ç ”ç©¶ä¸€ä¸‹ React Server Components      â”‚
â”‚                                          çš„æœ€ä½³å®è·µ               â”‚
â”‚                                                     10:30 AM      â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [ğŸ¤–]                                            10:30 AM  â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ æˆ‘ç†è§£æ‚¨æƒ³ç ”ç©¶ React Server Components çš„æœ€ä½³å®è·µã€‚      â”‚  â”‚
â”‚  â”‚ è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¯é¢˜ï¼æˆ‘å¯ä»¥ä¸ºæ‚¨å¯åŠ¨ä¸€ä¸ªæ·±åº¦ç ”ç©¶ï¼Œ         â”‚  â”‚
â”‚  â”‚ åˆ†ææœ€æ–°çš„æ–‡æ¡£ã€ç¤¾åŒºå®è·µå’Œå®é™…æ¡ˆä¾‹ï¼Œä¸ºæ‚¨ç”Ÿæˆä¸€ä»½         â”‚  â”‚
â”‚  â”‚ è¯¦ç»†çš„ç ”ç©¶æŠ¥å‘Šã€‚                                          â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®å¼€å§‹ç ”ç©¶ï¼š                                  â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ [ğŸ“‹ Copy] [ğŸ‘ Upvote] [ğŸ‘ Downvote]                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  [ç©ºç™½åŒºåŸŸ - ç”¨äºæ»šåŠ¨ç¼“å†²]                                        â”‚
â”‚                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ResearchPanel æ˜¾ç¤ºåŒºåŸŸ - sticky bottom-[72px]]                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚  âœ¨ Start Research                                     â”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Send a message...                                     [Send]â”‚â”‚
â”‚  â”‚ [ğŸ“] [ğŸ¨ Model Selector â–¼]                                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CSS ç±»å:
- æ¶ˆæ¯åŒº: "flex-1 overflow-y-scroll"
- ç”¨æˆ·æ¶ˆæ¯: "ml-auto max-w-[80%] rounded-2xl bg-blue-500 text-white px-3 py-2"
- AI æ¶ˆæ¯å®¹å™¨: "flex gap-3 items-start"
- AI å¤´åƒ: "size-8 rounded-full bg-background ring-1 ring-border"
- AI æ¶ˆæ¯å†…å®¹: "flex-1 space-y-4"
- æ“ä½œæŒ‰é’®: "flex gap-2 -ml-0.5"
- ResearchPanel: "sticky bottom-[72px] z-10 mx-auto w-full max-w-4xl px-4"
- ResearchButton: "w-full rounded-lg border bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-3"
```

#### é˜¶æ®µ 3: ç ”ç©¶è¿›è¡Œä¸­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Chatbot                                            [Account]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  [æ¶ˆæ¯å†å²åŒºåŸŸ - å¯æ»šåŠ¨]                                          â”‚
â”‚                                                                   â”‚
â”‚  [AI æ¶ˆæ¯ - "æˆ‘ç†è§£æ‚¨æƒ³ç ”ç©¶..."]                                  â”‚
â”‚                                                                   â”‚
â”‚  [ç©ºç™½åŒºåŸŸ]                                                       â”‚
â”‚                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ResearchProgress æ˜¾ç¤ºåŒºåŸŸ - sticky bottom-[72px]]              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚  â³ Research in progress...                [disabled] â”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚  ğŸ“Š Research Progress                                 â”‚ â”‚â”‚
â”‚  â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 60%                         â”‚ â”‚â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚â”‚
â”‚  â”‚  â”‚  âœ… Planning research strategy                        â”‚ â”‚â”‚
â”‚  â”‚  â”‚     â†’ Identified 5 key areas to investigate           â”‚ â”‚â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚â”‚
â”‚  â”‚  â”‚  âœ… Searching React documentation                     â”‚ â”‚â”‚
â”‚  â”‚  â”‚     â†’ Found 12 relevant articles                      â”‚ â”‚â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚â”‚
â”‚  â”‚  â”‚  ğŸ”„ Analyzing community best practices                â”‚ â”‚â”‚
â”‚  â”‚  â”‚     â†’ Processing GitHub discussions                   â”‚ â”‚â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚â”‚
â”‚  â”‚  â”‚  â³ Synthesizing findings...                          â”‚ â”‚â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚â”‚
â”‚  â”‚  â”‚  â¹ï¸ Generating comprehensive report                   â”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Send a message...                                     [Send]â”‚â”‚
â”‚  â”‚ [ğŸ“] [ğŸ¨ Model Selector â–¼]                                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CSS ç±»å:
- ResearchProgress å®¹å™¨: "rounded-lg border bg-white dark:bg-gray-800 p-4 shadow-sm"
- æ ‡é¢˜è¡Œ: "flex items-center gap-2 mb-3"
- åŠ è½½å›¾æ ‡: "w-5 h-5 animate-spin text-blue-500"
- è¿›åº¦æ¡å®¹å™¨: "w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-4"
- è¿›åº¦æ¡å¡«å……: "h-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-300"
- æ­¥éª¤åˆ—è¡¨: "space-y-2"
- æ­¥éª¤é¡¹: "flex items-start gap-2 text-sm"
- å®Œæˆæ­¥éª¤: "text-green-600 dark:text-green-400"
- è¿›è¡Œä¸­æ­¥éª¤: "text-blue-600 dark:text-blue-400"
- å¾…å¤„ç†æ­¥éª¤: "text-gray-500 dark:text-gray-400"
```

#### é˜¶æ®µ 4: ç ”ç©¶å®Œæˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Chatbot                                            [Account]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  [æ¶ˆæ¯å†å²åŒºåŸŸ - å¯æ»šåŠ¨]                                          â”‚
â”‚                                                                   â”‚
â”‚  [AI æ¶ˆæ¯ - "æˆ‘ç†è§£æ‚¨æƒ³ç ”ç©¶..."]                                  â”‚
â”‚                                                                   â”‚
â”‚  [ç©ºç™½åŒºåŸŸ]                                                       â”‚
â”‚                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [å®ŒæˆçŠ¶æ€æ˜¾ç¤º - 2 ç§’åæ¶ˆå¤±]                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚  âœ… Research Complete!                                â”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚  âœ… All steps completed                               â”‚ â”‚â”‚
â”‚  â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100%                        â”‚ â”‚â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚â”‚
â”‚  â”‚  â”‚  ğŸ“„ Sending report to AI...                           â”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Send a message...                                     [Send]â”‚â”‚
â”‚  â”‚ [ğŸ“] [ğŸ¨ Model Selector â–¼]                                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŠ¨ç”»:
- ResearchProgress æ·¡å‡º (fade-out, 2 ç§’)
- æˆåŠŸå›¾æ ‡è„‰å†²åŠ¨ç”» (pulse)
- è¿›åº¦æ¡å¡«å……åˆ° 100% (smooth transition)
```

#### é˜¶æ®µ 5: è‡ªåŠ¨å‘é€æŠ¥å‘Š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Chatbot                                            [Account]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  [æ¶ˆæ¯å†å²åŒºåŸŸ - å¯æ»šåŠ¨]                                          â”‚
â”‚                                                                   â”‚
â”‚  [AI æ¶ˆæ¯ - "æˆ‘ç†è§£æ‚¨æƒ³ç ”ç©¶..."]                                  â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Research completed:                    â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ # React Server Components æœ€ä½³å®è·µç ”ç©¶æŠ¥å‘Š               â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ ## æ‰§è¡Œæ‘˜è¦                                               â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ React Server Components (RSC) æ˜¯ React 18 å¼•å…¥çš„...      â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ ## æ ¸å¿ƒæ¦‚å¿µ                                               â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ 1. **æœåŠ¡ç«¯æ¸²æŸ“ä¼˜åŠ¿**                                     â”‚  â”‚
â”‚  â”‚    - å‡å°‘å®¢æˆ·ç«¯ JavaScript åŒ…å¤§å°                         â”‚  â”‚
â”‚  â”‚    - ç›´æ¥è®¿é—®åç«¯èµ„æºï¼ˆæ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿï¼‰                 â”‚  â”‚
â”‚  â”‚    - æå‡é¦–å±åŠ è½½æ€§èƒ½                                     â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ [... æ›´å¤šå†…å®¹ ...]                                        â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚                                           [Auto-sent] 2:01PM â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [ğŸ¤–] Thinking...                                10:32 AM  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Send a message...                                     [Send]â”‚â”‚
â”‚  â”‚ [ğŸ“] [ğŸ¨ Model Selector â–¼]                                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CSS ç±»å:
- è‡ªåŠ¨å‘é€æ¶ˆæ¯: "rounded-2xl bg-blue-500/10 border border-blue-500/20 px-3 py-2"
- Auto-sent æ ‡ç­¾: "text-xs text-blue-600 dark:text-blue-400 font-medium"
- Thinking æ¶ˆæ¯: "text-sm text-muted-foreground animate-pulse"
```

#### é˜¶æ®µ 6: Artifact å±•ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Chatbot         â”‚  ğŸ“„ React Server Components Best Practices   â”‚
â”‚  [ğŸ—‘ï¸] [+]        â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚  [â–­] [ğŸ”’]        â”‚                                    [Ã— Close] â”‚
â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Conversations    â”‚                                              â”‚
â”‚  â†’ Chat 3        â”‚  # React Server Components æœ€ä½³å®è·µ          â”‚
â”‚  - Chat 1        â”‚                                              â”‚
â”‚  - Chat 2        â”‚  > ç ”ç©¶å®Œæˆäº: 2025-10-31 14:32              â”‚
â”‚                  â”‚  > æ•°æ®æ¥æº: React å®˜æ–¹æ–‡æ¡£ã€GitHubã€Stack... â”‚
â”‚ [ğŸ‘¤ Guest Ë…]     â”‚                                              â”‚
â”‚                  â”‚  ## 1. æ ¸å¿ƒæ¦‚å¿µ                              â”‚
â”‚                  â”‚                                              â”‚
â”‚                  â”‚  React Server Components (RSC) æ˜¯ä¸€ç§æ–°çš„... â”‚
â”‚                  â”‚                                              â”‚
â”‚                  â”‚  ### 1.1 æœåŠ¡ç«¯æ¸²æŸ“ä¼˜åŠ¿                      â”‚
â”‚                  â”‚                                              â”‚
â”‚                  â”‚  - **æ€§èƒ½æå‡**: å‡å°‘å®¢æˆ·ç«¯ JavaScript ä½“ç§¯  â”‚
â”‚                  â”‚  - **æ•°æ®è®¿é—®**: ç›´æ¥è®¿é—®åç«¯èµ„æº            â”‚
â”‚                  â”‚  - **SEO ä¼˜åŒ–**: å®Œæ•´çš„ HTML å†…å®¹            â”‚
â”‚                  â”‚                                              â”‚
â”‚                  â”‚  ## 2. ä½¿ç”¨åœºæ™¯                              â”‚
â”‚                  â”‚                                              â”‚
â”‚                  â”‚  ### 2.1 ä½•æ—¶ä½¿ç”¨ Server Components         â”‚
â”‚                  â”‚                                              â”‚
â”‚                  â”‚  ```typescript                              â”‚
â”‚                  â”‚  // âœ… é€‚åˆ Server Component                â”‚
â”‚                  â”‚  async function UserProfile({ userId }) {   â”‚
â”‚                  â”‚    const user = await db.user.findUnique({  â”‚
â”‚                  â”‚      where: { id: userId }                  â”‚
â”‚                  â”‚    });                                      â”‚
â”‚                  â”‚    return <div>{user.name}</div>;           â”‚
â”‚                  â”‚  }                                          â”‚
â”‚                  â”‚  ```                                        â”‚
â”‚                  â”‚                                              â”‚
â”‚                  â”‚  [... æ»šåŠ¨æŸ¥çœ‹æ›´å¤šå†…å®¹ ...]                  â”‚
â”‚                  â”‚                                              â”‚
â”‚                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                  â”‚  â”‚  ğŸ“‹ Copy  ğŸ’¾ Export  ğŸ”„ Regenerate  â”‚    â”‚
â”‚                  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CSS ç±»å:
- å¸ƒå±€å®¹å™¨: "flex h-screen"
- å·¦ä¾§è¾¹æ : "w-[400px] border-r"
- Artifact åŒºåŸŸ: "flex-1 overflow-hidden"
- Artifact å¤´éƒ¨: "border-b px-4 py-3 flex items-center justify-between"
- Artifact å†…å®¹: "h-[calc(100%-120px)] overflow-y-auto px-8 py-6 prose prose-sm"
- æ“ä½œæ : "border-t px-4 py-3 flex gap-2"

åŠ¨ç”»:
- Artifact æ»‘å…¥: "animate-in slide-in-from-right duration-300"
- å†…å®¹æ·¡å…¥: "animate-in fade-in duration-500"
- èŠå¤©åŒºåŸŸå‹ç¼©: "transition-all duration-300"
```

---

## å…³é”®ç»„ä»¶å®ç°

### ğŸ“„ å®Œæ•´ä»£ç å®ç°

#### 1. Chat ç»„ä»¶ä¿®æ”¹ (components/chat.tsx)

```typescript
"use client";

import { useChat } from "@ai-sdk/react";
import { useEffect, useMemo, useState, useCallback } from "react";
import { ChatHeader } from "@/components/chat-header";
import { Messages } from "@/components/messages";
import { MultimodalInput } from "@/components/multimodal-input";
import { Artifact } from "./artifact";
import { ResearchPanel } from "./research-panel"; // â­ æ–°å¢
import { useResearchProgress } from "@/hooks/use-research-progress"; // â­ æ–°å¢
import { detectResearchKeywords, extractResearchQuery } from "@/lib/research-utils"; // â­ æ–°å¢

export function Chat({
  id,
  initialMessages,
  initialChatModel,
  initialVisibilityType,
  isReadonly,
  autoResume,
  initialLastContext,
}) {
  // ========== ç°æœ‰ä»£ç  ==========
  const {
    messages,
    setMessages,
    sendMessage, // â­ å…³é”®ï¼šç”¨äºå‘é€ç ”ç©¶æŠ¥å‘Š
    status,
    stop,
    regenerate,
    resumeStream,
  } = useChat({
    id,
    messages: initialMessages,
    // ... ç°æœ‰é…ç½®
  });

  // ========== æ–°å¢ï¼šç ”ç©¶çŠ¶æ€ç®¡ç† ==========
  const [researchPrompt, setResearchPrompt] = useState<string | null>(null);
  const [showResearchUI, setShowResearchUI] = useState(false);

  // æ£€æµ‹æœ€åä¸€æ¡ AI æ¶ˆæ¯æ˜¯å¦éœ€è¦æ˜¾ç¤ºç ”ç©¶æŒ‰é’®
  const lastAiMessage = useMemo(() => {
    return messages
      .filter(m => m.role === 'assistant')
      .pop();
  }, [messages]);

  const shouldShowResearchButton = useMemo(() => {
    return (
      lastAiMessage &&
      detectResearchKeywords(lastAiMessage.content) &&
      !researchPrompt && // æœªå¼€å§‹ç ”ç©¶æ—¶æ˜¾ç¤º
      !showResearchUI   // ç ”ç©¶ UI æœªæ˜¾ç¤ºæ—¶æ˜¾ç¤º
    );
  }, [lastAiMessage, researchPrompt, showResearchUI]);

  // ========== æ–°å¢ï¼šç ”ç©¶ Hook ==========
  const { events, status: researchStatus, report, error } = useResearchProgress({
    prompt: researchPrompt,
    onComplete: useCallback((report: string) => {
      console.log('Research completed, sending to AI:', report.substring(0, 100));

      // â­ å…³é”®ï¼šä½¿ç”¨ sendMessage å‘é€æŠ¥å‘Šç»™ AI
      sendMessage({
        role: 'user',
        parts: [{
          type: 'text',
          text: `Research completed:\n\n${report}`
        }]
      });

      // æ¸…ç†çŠ¶æ€
      setResearchPrompt(null);
      setShowResearchUI(false);
    }, [sendMessage])
  });

  // ========== äº‹ä»¶å¤„ç† ==========
  const handleStartResearch = useCallback((prompt: string) => {
    console.log('Starting research with prompt:', prompt);
    setResearchPrompt(prompt);
    setShowResearchUI(true);
  }, []);

  // ========== æ¸²æŸ“ ==========
  return (
    <>
      <div className="overscroll-behavior-contain flex h-dvh min-w-0 touch-pan-y flex-col bg-background">
        <ChatHeader
          chatId={id}
          isReadonly={isReadonly}
          selectedVisibilityType={initialVisibilityType}
        />

        {/* ========== æ¶ˆæ¯åˆ—è¡¨ (ä¸ä¿®æ”¹) ========== */}
        <Messages
          chatId={id}
          isArtifactVisible={isArtifactVisible}
          isReadonly={isReadonly}
          messages={messages}
          regenerate={regenerate}
          selectedModelId={initialChatModel}
          setMessages={setMessages}
          status={status}
          votes={votes}
        />

        {/* ========== æ–°å¢ï¼šç ”ç©¶é¢æ¿ (sticky å®šä½) ========== */}
        {(shouldShowResearchButton || showResearchUI) && (
          <ResearchPanel
            prompt={extractResearchQuery(lastAiMessage?.content || '')}
            isActive={showResearchUI}
            events={events}
            status={researchStatus}
            onStart={handleStartResearch}
          />
        )}

        {/* ========== è¾“å…¥æ¡† (ä¸ä¿®æ”¹) ========== */}
        <div className="sticky bottom-0 z-1 mx-auto flex w-full max-w-4xl gap-2 border-t-0 bg-background px-2 pb-3 md:px-4 md:pb-4">
          {!isReadonly && (
            <MultimodalInput
              attachments={attachments}
              chatId={id}
              input={input}
              messages={messages}
              onModelChange={setCurrentModelId}
              selectedModelId={currentModelId}
              selectedVisibilityType={visibilityType}
              sendMessage={sendMessage}
              setAttachments={setAttachments}
              setInput={setInput}
              setMessages={setMessages}
              status={status}
              stop={stop}
              usage={usage}
            />
          )}
        </div>
      </div>

      {/* ========== Artifact (ä¸ä¿®æ”¹) ========== */}
      <Artifact
        attachments={attachments}
        chatId={id}
        input={input}
        isReadonly={isReadonly}
        messages={messages}
        regenerate={regenerate}
        selectedModelId={currentModelId}
        selectedVisibilityType={visibilityType}
        sendMessage={sendMessage}
        setAttachments={setAttachments}
        setInput={setInput}
        setMessages={setMessages}
        status={status}
        stop={stop}
        votes={votes}
      />
    </>
  );
}
```

#### 2. ResearchPanel ç»„ä»¶ (components/research-panel.tsx)

```typescript
"use client";

import { AnimatePresence, motion } from "framer-motion";
import { ResearchButton } from "./research-button";
import { ResearchProgress } from "./research-progress";
import type { ProgressEvent, ResearchStatus } from "@/lib/types";

interface ResearchPanelProps {
  prompt: string;
  isActive: boolean;
  events: ProgressEvent[];
  status: ResearchStatus;
  onStart: (prompt: string) => void;
}

export function ResearchPanel({
  prompt,
  isActive,
  events,
  status,
  onStart,
}: ResearchPanelProps) {
  return (
    <div className="sticky bottom-[72px] z-10 mx-auto w-full max-w-4xl px-2 md:px-4">
      <AnimatePresence mode="wait">
        {!isActive && (
          <motion.div
            key="button"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: -20 }}
            transition={{ duration: 0.3 }}
          >
            <div className="rounded-lg border bg-background p-4 shadow-lg">
              <ResearchButton
                prompt={prompt}
                onStart={onStart}
                disabled={status === 'running'}
              />
            </div>
          </motion.div>
        )}

        {isActive && (
          <motion.div
            key="progress"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: -20 }}
            transition={{ duration: 0.3 }}
          >
            <div className="rounded-lg border bg-background p-4 shadow-lg">
              <ResearchProgress events={events} status={status} />
            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
}
```

#### 3. ResearchButton ç»„ä»¶ (components/research-button.tsx)

```typescript
"use client";

import { useState } from "react";
import { Sparkles } from "lucide-react";
import { Button } from "./ui/button";

interface ResearchButtonProps {
  prompt: string;
  onStart: (prompt: string) => void;
  disabled?: boolean;
}

export function ResearchButton({ prompt, onStart, disabled }: ResearchButtonProps) {
  const [isStarting, setIsStarting] = useState(false);

  const handleClick = async () => {
    setIsStarting(true);
    try {
      await onStart(prompt);
    } finally {
      // ä¿æŒ starting çŠ¶æ€ï¼Œç›´åˆ°ç ”ç©¶ Hook æ¥ç®¡
      setTimeout(() => setIsStarting(false), 300);
    }
  };

  return (
    <Button
      onClick={handleClick}
      disabled={disabled || isStarting}
      className="w-full gap-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700 transition-all duration-200"
      size="lg"
    >
      <Sparkles className={`h-5 w-5 ${isStarting ? 'animate-pulse' : ''}`} />
      {isStarting ? 'Starting research...' : 'Start Research'}
    </Button>
  );
}
```

#### 4. ResearchProgress ç»„ä»¶ (components/research-progress.tsx)

```typescript
"use client";

import { useMemo } from "react";
import { Loader2, CheckCircle2, XCircle, Clock } from "lucide-react";
import type { ProgressEvent, ResearchStatus } from "@/lib/types";

interface ResearchProgressProps {
  events: ProgressEvent[];
  status: ResearchStatus;
}

export function ResearchProgress({ events, status }: ResearchProgressProps) {
  // è®¡ç®—è¿›åº¦ç™¾åˆ†æ¯”
  const percentage = useMemo(() => {
    if (status === 'completed') return 100;
    if (status === 'failed') return 0;
    if (events.length === 0) return 0;

    // æ ¹æ®äº‹ä»¶ç±»å‹è®¡ç®—è¿›åº¦
    const weights = {
      start: 10,
      plan: 20,
      progress: 10,
      done: 100,
    };

    const total = events.reduce((sum, event) => {
      return sum + (weights[event.type] || 0);
    }, 0);

    return Math.min(Math.round(total), 95); // æœ€é«˜ 95%ï¼Œå®Œæˆåæ‰åˆ° 100%
  }, [events, status]);

  // è·å–çŠ¶æ€å›¾æ ‡
  const StatusIcon = useMemo(() => {
    switch (status) {
      case 'completed':
        return CheckCircle2;
      case 'failed':
        return XCircle;
      case 'running':
        return Loader2;
      default:
        return Clock;
    }
  }, [status]);

  return (
    <div className="space-y-4">
      {/* æ ‡é¢˜æ  */}
      <div className="flex items-center gap-2">
        <StatusIcon
          className={`h-5 w-5 ${
            status === 'running' ? 'animate-spin text-blue-500' :
            status === 'completed' ? 'text-green-500' :
            status === 'failed' ? 'text-red-500' :
            'text-gray-500'
          }`}
        />
        <span className="font-medium">
          {status === 'completed' ? 'Research Complete' :
           status === 'failed' ? 'Research Failed' :
           status === 'running' ? 'Research in Progress' :
           'Research Starting'}
        </span>
        <span className="ml-auto text-sm text-muted-foreground">
          {percentage}%
        </span>
      </div>

      {/* è¿›åº¦æ¡ */}
      <div className="w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
        <div
          className={`h-full transition-all duration-500 ease-out ${
            status === 'completed' ? 'bg-green-500' :
            status === 'failed' ? 'bg-red-500' :
            'bg-gradient-to-r from-blue-500 to-purple-600'
          }`}
          style={{ width: `${percentage}%` }}
        />
      </div>

      {/* æ­¥éª¤åˆ—è¡¨ */}
      <div className="space-y-2 max-h-[200px] overflow-y-auto">
        {events.map((event, index) => (
          <EventItem key={index} event={event} />
        ))}
      </div>

      {/* å®Œæˆæ¶ˆæ¯ */}
      {status === 'completed' && (
        <div className="text-sm text-green-600 dark:text-green-400 flex items-center gap-2">
          <CheckCircle2 className="h-4 w-4" />
          All steps completed. Sending report to AI...
        </div>
      )}

      {/* é”™è¯¯æ¶ˆæ¯ */}
      {status === 'failed' && (
        <div className="text-sm text-red-600 dark:text-red-400 flex items-center gap-2">
          <XCircle className="h-4 w-4" />
          Research failed. Please try again.
        </div>
      )}
    </div>
  );
}

function EventItem({ event }: { event: ProgressEvent }) {
  const icon = useMemo(() => {
    switch (event.type) {
      case 'start':
        return 'ğŸš€';
      case 'plan':
        return 'ğŸ“‹';
      case 'progress':
        return 'ğŸ”„';
      case 'done':
        return 'âœ…';
      case 'error':
        return 'âŒ';
      default:
        return 'â€¢';
    }
  }, [event.type]);

  return (
    <div className="flex items-start gap-2 text-sm">
      <span className="mt-0.5">{icon}</span>
      <div className="flex-1">
        <div className="font-medium">{event.data.message || event.data.step}</div>
        {event.data.detail && (
          <div className="text-muted-foreground text-xs mt-0.5">
            â†’ {event.data.detail}
          </div>
        )}
      </div>
    </div>
  );
}
```

#### 5. useResearchProgress Hook (hooks/use-research-progress.ts)

```typescript
"use client";

import { useState, useEffect } from "react";
import { fetchEventSource } from "@microsoft/fetch-event-source";
import type { ProgressEvent, ResearchStatus } from "@/lib/types";

interface UseResearchProgressProps {
  prompt: string | null;
  onComplete?: (report: string) => void;
}

export function useResearchProgress({
  prompt,
  onComplete
}: UseResearchProgressProps) {
  const [events, setEvents] = useState<ProgressEvent[]>([]);
  const [status, setStatus] = useState<ResearchStatus>('idle');
  const [report, setReport] = useState<string | null>(null);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    if (!prompt) {
      setStatus('idle');
      setEvents([]);
      setReport(null);
      setError(null);
      return;
    }

    const abortController = new AbortController();

    const startResearch = async () => {
      setStatus('running');
      setEvents([]);
      setError(null);

      try {
        await fetchEventSource('/api/research/stream', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ prompt }),
          signal: abortController.signal,

          onopen: async (response) => {
            if (response.ok) {
              console.log('SSE connection established');
            } else {
              throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
          },

          onmessage: (event) => {
            try {
              const data = JSON.parse(event.data);
              const progressEvent: ProgressEvent = {
                type: event.event as any,
                data,
              };

              console.log('SSE event received:', progressEvent);

              // æ·»åŠ äº‹ä»¶åˆ°åˆ—è¡¨
              setEvents(prev => [...prev, progressEvent]);

              // æ ¹æ®äº‹ä»¶ç±»å‹æ›´æ–°çŠ¶æ€
              switch (event.event) {
                case 'start':
                  setStatus('running');
                  break;

                case 'done':
                  setStatus('completed');
                  setReport(data.report);

                  console.log('Research completed, calling onComplete');

                  // è§¦å‘å®Œæˆå›è°ƒ
                  if (onComplete) {
                    onComplete(data.report);
                  }
                  break;

                case 'error':
                  setStatus('failed');
                  setError(data.message || 'Research failed');
                  break;
              }
            } catch (err) {
              console.error('Failed to parse SSE event:', err);
            }
          },

          onerror: (err) => {
            console.error('SSE connection error:', err);
            setStatus('failed');
            setError('Connection failed');

            // è®© fetch-event-source å¤„ç†é‡è¿
            throw err;
          },

          // é‡è¿é…ç½® (fetch-event-source å†…ç½®)
          openWhenHidden: true,
        });
      } catch (err) {
        console.error('Research error:', err);
        setStatus('failed');
        setError(err instanceof Error ? err.message : 'Research failed');
      }
    };

    startResearch();

    // æ¸…ç†å‡½æ•°
    return () => {
      console.log('Cleaning up research connection');
      abortController.abort();
    };
  }, [prompt, onComplete]);

  return { events, status, report, error };
}
```

#### 6. å·¥å…·å‡½æ•° (lib/research-utils.ts)

```typescript
/**
 * æ£€æµ‹æ¶ˆæ¯å†…å®¹æ˜¯å¦åŒ…å«ç ”ç©¶å…³é”®è¯
 */
export function detectResearchKeywords(content: string): boolean {
  if (!content) return false;

  const keywords = [
    // è‹±æ–‡å…³é”®è¯
    'research',
    'investigate',
    'study',
    'analyze',
    'analysis',
    'explore',
    'examine',
    'survey',
    'review',

    // ä¸­æ–‡å…³é”®è¯
    'ç ”ç©¶',
    'è°ƒæŸ¥',
    'åˆ†æ',
    'æ¢ç´¢',
    'è€ƒå¯Ÿ',
    'å®¡æŸ¥',
    'ç»¼è¿°',
    'è°ƒç ”',
  ];

  const lowerContent = content.toLowerCase();

  return keywords.some(keyword =>
    lowerContent.includes(keyword.toLowerCase())
  );
}

/**
 * ä»æ¶ˆæ¯å†…å®¹ä¸­æå–ç ”ç©¶é—®é¢˜
 */
export function extractResearchQuery(content: string): string {
  if (!content) return '';

  // ç§»é™¤å¸¸è§çš„ç¤¼è²Œç”¨è¯­å’Œè¿æ¥è¯
  const cleaned = content
    .replace(/^(please|can you|could you|would you|help me|i want to|i need to)/gi, '')
    .replace(/^(è¯·|èƒ½å¦|å¯ä»¥|å¸®æˆ‘|æˆ‘æƒ³|æˆ‘éœ€è¦)/g, '')
    .trim();

  // å¦‚æœæ¸…ç†åå¤ªçŸ­ï¼Œè¿”å›åŸå†…å®¹
  if (cleaned.length < 10) {
    return content;
  }

  return cleaned;
}

/**
 * æ ¼å¼åŒ–ç ”ç©¶æŠ¥å‘Šç”¨äºå‘é€ç»™ AI
 */
export function formatResearchReport(report: string): string {
  return `Research completed:\n\n${report}`;
}
```

#### 7. API è·¯ç”± (app/api/research/stream/route.ts)

```typescript
import { NextRequest } from 'next/server';

export const runtime = 'nodejs';

export async function POST(request: NextRequest) {
  try {
    const { prompt } = await request.json();

    // éªŒè¯è¾“å…¥
    if (!prompt || typeof prompt !== 'string') {
      return new Response(
        JSON.stringify({ error: 'Prompt is required' }),
        {
          status: 400,
          headers: { 'Content-Type': 'application/json' }
        }
      );
    }

    if (prompt.length < 10) {
      return new Response(
        JSON.stringify({ error: 'Prompt must be at least 10 characters' }),
        {
          status: 400,
          headers: { 'Content-Type': 'application/json' }
        }
      );
    }

    // è·å–åç«¯ URL
    const backendUrl = process.env.RESEARCH_API_URL;
    if (!backendUrl) {
      return new Response(
        JSON.stringify({ error: 'Research API not configured' }),
        {
          status: 500,
          headers: { 'Content-Type': 'application/json' }
        }
      );
    }

    // ä»£ç†è¯·æ±‚åˆ° FastAPI åç«¯
    const response = await fetch(`${backendUrl}/api/research/stream`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ prompt }),
    });

    if (!response.ok) {
      throw new Error(`Backend error: ${response.status}`);
    }

    // è¿”å› SSE æµ
    return new Response(response.body, {
      headers: {
        'Content-Type': 'text/event-stream',
        'Cache-Control': 'no-cache, no-transform',
        'Connection': 'keep-alive',
        'X-Accel-Buffering': 'no',
        'Access-Control-Allow-Origin': '*',
      },
    });
  } catch (error) {
    console.error('Research API error:', error);
    return new Response(
      JSON.stringify({
        error: 'Failed to start research',
        details: error instanceof Error ? error.message : 'Unknown error'
      }),
      {
        status: 500,
        headers: { 'Content-Type': 'application/json' }
      }
    );
  }
}

// å¤„ç† OPTIONS è¯·æ±‚ï¼ˆCORSï¼‰
export async function OPTIONS() {
  return new Response(null, {
    headers: {
      'Access-Control-Allow-Origin': '*',
      'Access-Control-Allow-Methods': 'POST, OPTIONS',
      'Access-Control-Allow-Headers': 'Content-Type',
    },
  });
}
```

#### 8. ç±»å‹å®šä¹‰ (lib/types.ts)

```typescript
// æ–°å¢ç±»å‹å®šä¹‰

export type ProgressEvent = {
  type: 'start' | 'plan' | 'progress' | 'done' | 'error';
  data: {
    message?: string;
    step?: string;
    detail?: string;
    report?: string;
    error?: string;
    [key: string]: any;
  };
};

export type ResearchStatus = 'idle' | 'running' | 'completed' | 'failed';

// ç°æœ‰ç±»å‹ä¿æŒä¸å˜
export type ChatMessage = {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  parts: MessagePart[];
  createdAt?: Date;
};

// ... å…¶ä»–ç°æœ‰ç±»å‹
```

---

## æ ·å¼è®¾è®¡è§„èŒƒ

### ğŸ¨ è®¾è®¡ Token

#### é¢œè‰²ç³»ç»Ÿ

```css
/* ä¸»é¢˜é¢œè‰² */
--primary: #006cff;          /* ç”¨æˆ·æ¶ˆæ¯èƒŒæ™¯ */
--primary-hover: #0052cc;    /* æŒ‰é’® hover */
--secondary: #6366f1;        /* ç ”ç©¶æŒ‰é’®æ¸å˜èµ·å§‹ */
--secondary-end: #8b5cf6;    /* ç ”ç©¶æŒ‰é’®æ¸å˜ç»“æŸ */

/* çŠ¶æ€é¢œè‰² */
--success: #10b981;          /* æˆåŠŸ/å®Œæˆ */
--error: #ef4444;            /* é”™è¯¯/å¤±è´¥ */
--warning: #f59e0b;          /* è­¦å‘Š */
--info: #3b82f6;             /* ä¿¡æ¯/è¿›è¡Œä¸­ */

/* èƒŒæ™¯é¢œè‰² */
--background: #ffffff;       /* ä¸»èƒŒæ™¯ */
--surface: #f9fafb;          /* å¡ç‰‡èƒŒæ™¯ */
--border: #e5e7eb;           /* è¾¹æ¡† */

/* æ·±è‰²æ¨¡å¼ */
@media (prefers-color-scheme: dark) {
  --background: #111827;
  --surface: #1f2937;
  --border: #374151;
}

/* æ–‡æœ¬é¢œè‰² */
--text-primary: #111827;
--text-secondary: #6b7280;
--text-muted: #9ca3af;

@media (prefers-color-scheme: dark) {
  --text-primary: #f9fafb;
  --text-secondary: #d1d5db;
  --text-muted: #9ca3af;
}
```

#### é—´è·ç³»ç»Ÿ

```css
/* Tailwind é—´è· */
--spacing-1: 0.25rem;  /* 4px */
--spacing-2: 0.5rem;   /* 8px */
--spacing-3: 0.75rem;  /* 12px */
--spacing-4: 1rem;     /* 16px */
--spacing-5: 1.25rem;  /* 20px */
--spacing-6: 1.5rem;   /* 24px */
--spacing-8: 2rem;     /* 32px */

/* ç»„ä»¶é—´è· */
--message-gap: 1rem;           /* æ¶ˆæ¯ä¹‹é—´ */
--component-padding: 1rem;     /* ç»„ä»¶å†…è¾¹è· */
--section-gap: 1.5rem;         /* åŒºåŸŸé—´è· */
```

#### åœ†è§’å’Œé˜´å½±

```css
/* åœ†è§’ */
--radius-sm: 0.375rem;  /* 6px - å°æŒ‰é’® */
--radius-md: 0.5rem;    /* 8px - å¡ç‰‡ */
--radius-lg: 0.75rem;   /* 12px - å¤§å¡ç‰‡ */
--radius-xl: 1rem;      /* 16px - æ¶ˆæ¯æ°”æ³¡ */
--radius-full: 9999px;  /* åœ†å½¢ */

/* é˜´å½± */
--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
```

### ğŸ“± ç»„ä»¶æ ·å¼

#### ResearchButton

```css
.research-button {
  /* å¸ƒå±€ */
  width: 100%;
  padding: 0.75rem 1rem;

  /* å¤–è§‚ */
  background: linear-gradient(to right, #3b82f6, #8b5cf6);
  color: white;
  border-radius: 0.5rem;
  border: none;

  /* æ–‡å­— */
  font-weight: 500;
  font-size: 0.875rem;

  /* äº¤äº’ */
  cursor: pointer;
  transition: all 0.2s ease;

  /* å›¾æ ‡ */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.research-button:hover:not(:disabled) {
  background: linear-gradient(to right, #2563eb, #7c3aed);
  transform: translateY(-1px);
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
}

.research-button:active:not(:disabled) {
  transform: translateY(0);
}

.research-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
```

#### ResearchProgress

```css
.research-progress {
  /* å¸ƒå±€ */
  padding: 1rem;

  /* å¤–è§‚ */
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 0.5rem;
  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
}

.progress-bar {
  /* å®¹å™¨ */
  width: 100%;
  height: 0.5rem;
  background: #e5e7eb;
  border-radius: 9999px;
  overflow: hidden;
}

.progress-fill {
  /* å¡«å…… */
  height: 100%;
  background: linear-gradient(to right, #3b82f6, #8b5cf6);
  transition: width 0.5s ease-out;
}

.progress-step {
  /* æ­¥éª¤é¡¹ */
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  font-size: 0.875rem;
  padding: 0.25rem 0;
}

.progress-step.completed {
  color: #10b981;
}

.progress-step.running {
  color: #3b82f6;
}

.progress-step.pending {
  color: #6b7280;
}
```

#### ResearchPanel (Sticky)

```css
.research-panel {
  /* å®šä½ */
  position: sticky;
  bottom: 72px;  /* è¾“å…¥æ¡†é«˜åº¦ */
  z-index: 10;

  /* å¸ƒå±€ */
  margin: 0 auto;
  width: 100%;
  max-width: 56rem;  /* 896px - ä¸æ¶ˆæ¯åŒºåŸŸå¯¹é½ */
  padding: 0 0.5rem;
}

@media (min-width: 768px) {
  .research-panel {
    padding: 0 1rem;
  }
}

.research-panel-card {
  /* å¤–è§‚ */
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 0.5rem;
  padding: 1rem;
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
}

@media (prefers-color-scheme: dark) {
  .research-panel-card {
    background: #1f2937;
    border-color: #374151;
  }
}
```

---

## äº¤äº’åŠ¨ç”»è®¾è®¡

### ğŸ¬ åŠ¨ç”»æ—¶åº

#### 1. ResearchButton å‡ºç°åŠ¨ç”»

```typescript
// Framer Motion é…ç½®
const buttonVariants = {
  hidden: {
    opacity: 0,
    y: 20,
    scale: 0.95
  },
  visible: {
    opacity: 1,
    y: 0,
    scale: 1,
    transition: {
      duration: 0.3,
      ease: "easeOut"
    }
  },
  exit: {
    opacity: 0,
    y: -20,
    scale: 0.95,
    transition: {
      duration: 0.2
    }
  }
};

<motion.div
  variants={buttonVariants}
  initial="hidden"
  animate="visible"
  exit="exit"
>
  <ResearchButton />
</motion.div>
```

#### 2. æŒ‰é’®ç‚¹å‡»åŠ¨ç”»

```typescript
const clickAnimation = {
  scale: [1, 0.95, 1],
  transition: {
    duration: 0.2,
    times: [0, 0.5, 1]
  }
};

<motion.button
  whileTap={clickAnimation}
  whileHover={{ scale: 1.02 }}
>
  Start Research
</motion.button>
```

#### 3. ResearchProgress åˆ‡æ¢åŠ¨ç”»

```typescript
const progressVariants = {
  hidden: {
    opacity: 0,
    y: 20,
    height: 0
  },
  visible: {
    opacity: 1,
    y: 0,
    height: "auto",
    transition: {
      duration: 0.3,
      ease: "easeOut"
    }
  },
  exit: {
    opacity: 0,
    scale: 0.95,
    transition: {
      duration: 0.5,
      ease: "easeIn"
    }
  }
};

<AnimatePresence mode="wait">
  {showProgress && (
    <motion.div
      variants={progressVariants}
      initial="hidden"
      animate="visible"
      exit="exit"
    >
      <ResearchProgress />
    </motion.div>
  )}
</AnimatePresence>
```

#### 4. è¿›åº¦æ¡å¡«å……åŠ¨ç”»

```css
.progress-fill {
  transition: width 0.5s cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* æˆåŠŸå®ŒæˆåŠ¨ç”» */
@keyframes success-pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.05);
  }
}

.progress-fill.completed {
  animation: success-pulse 1s ease-in-out;
}
```

#### 5. æ­¥éª¤é¡¹å‡ºç°åŠ¨ç”»

```typescript
const stepVariants = {
  hidden: {
    opacity: 0,
    x: -20
  },
  visible: (index: number) => ({
    opacity: 1,
    x: 0,
    transition: {
      delay: index * 0.1,
      duration: 0.3
    }
  })
};

{events.map((event, index) => (
  <motion.div
    key={index}
    custom={index}
    variants={stepVariants}
    initial="hidden"
    animate="visible"
  >
    <EventItem event={event} />
  </motion.div>
))}
```

#### 6. Artifact å±•å¼€åŠ¨ç”»

```typescript
const artifactVariants = {
  hidden: {
    x: "100%",
    opacity: 0
  },
  visible: {
    x: 0,
    opacity: 1,
    transition: {
      duration: 0.4,
      ease: "easeOut"
    }
  },
  exit: {
    x: "100%",
    opacity: 0,
    transition: {
      duration: 0.3,
      ease: "easeIn"
    }
  }
};

// åŒæ—¶èŠå¤©åŒºåŸŸå‹ç¼©åŠ¨ç”»
const chatVariants = {
  full: {
    width: "100%",
    transition: { duration: 0.4 }
  },
  compressed: {
    width: "400px",
    transition: { duration: 0.4 }
  }
};
```

---

## å“åº”å¼è®¾è®¡

### ğŸ“± æ–­ç‚¹ç³»ç»Ÿ

```typescript
// tailwind.config.ts
export default {
  theme: {
    screens: {
      'sm': '640px',   // æ‰‹æœºæ¨ªå±
      'md': '768px',   // å¹³æ¿
      'lg': '1024px',  // ç¬”è®°æœ¬
      'xl': '1280px',  // æ¡Œé¢
      '2xl': '1536px', // å¤§å±
    }
  }
}
```

### ğŸ¯ å“åº”å¼å¸ƒå±€

#### ç§»åŠ¨ç«¯ (< 768px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  Messages (å…¨å®½)             â”‚
â”‚                             â”‚
â”‚  [ç”¨æˆ·æ¶ˆæ¯ - å³å¯¹é½]         â”‚
â”‚  [AI æ¶ˆæ¯ - å·¦å¯¹é½]          â”‚
â”‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ResearchButton - å…¨å®½]    â”‚
â”‚  æˆ–                          â”‚
â”‚  [ResearchProgress - å…¨å®½]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Input - å…¨å®½]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CSS:
.research-panel {
  padding: 0 1rem;
  bottom: 60px;  /* ç§»åŠ¨ç«¯è¾“å…¥æ¡†æ›´å° */
}

.research-button {
  font-size: 0.875rem;
  padding: 0.75rem 1rem;
}

.progress-step {
  font-size: 0.8125rem;
}
```

#### å¹³æ¿ç«¯ (768px - 1024px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                   â”‚
â”‚  Messages (max-w-4xl, å±…ä¸­)       â”‚
â”‚                                   â”‚
â”‚                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ResearchPanel - max-w-4xl]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Input - max-w-4xl, å±…ä¸­]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CSS:
.research-panel {
  max-width: 56rem;
  padding: 0 1.5rem;
}
```

#### æ¡Œé¢ç«¯ (> 1024px)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sidebar    â”‚  Header                  â”‚
â”‚  (å¯æŠ˜å )   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                          â”‚
â”‚  History    â”‚  Messages (max-w-4xl)    â”‚
â”‚             â”‚                          â”‚
â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚  [ResearchPanel]         â”‚
â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Account]  â”‚  [Input]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¸¦ Artifact:
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Side â”‚  Chat     â”‚  Artifact        â”‚
â”‚ bar  â”‚  (400px)  â”‚  (flex-1)        â”‚
â”‚      â”‚           â”‚                  â”‚
â”‚      â”‚  Messages â”‚  [æŠ¥å‘Šå†…å®¹]      â”‚
â”‚      â”‚           â”‚                  â”‚
â”‚      â”‚  [Panel]  â”‚                  â”‚
â”‚      â”‚  [Input]  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“ å“åº”å¼ CSS

```css
/* ç§»åŠ¨ä¼˜å…ˆ */
.research-panel {
  position: sticky;
  bottom: 60px;
  padding: 0 0.5rem;
}

.research-button {
  font-size: 0.875rem;
  padding: 0.75rem 1rem;
}

.progress-step {
  font-size: 0.8125rem;
}

/* å¹³æ¿ */
@media (min-width: 768px) {
  .research-panel {
    bottom: 72px;
    padding: 0 1rem;
  }

  .research-button {
    font-size: 1rem;
    padding: 0.875rem 1.25rem;
  }

  .progress-step {
    font-size: 0.875rem;
  }
}

/* æ¡Œé¢ */
@media (min-width: 1024px) {
  .research-panel {
    padding: 0 1.5rem;
  }

  /* Artifact æ¿€æ´»æ—¶èŠå¤©åŒºåŸŸå‹ç¼© */
  .chat-container.artifact-active {
    width: 400px;
  }
}

/* å¤§å± */
@media (min-width: 1536px) {
  .research-panel {
    max-width: 64rem;
  }
}
```

---

## éªŒæ”¶æ ‡å‡†

### âœ… åŠŸèƒ½éªŒæ”¶

#### 1. ç ”ç©¶æŒ‰é’®æ˜¾ç¤º
- [ ] AI æ¶ˆæ¯åŒ…å«ç ”ç©¶å…³é”®è¯æ—¶è‡ªåŠ¨æ˜¾ç¤º
- [ ] æŒ‰é’®ä½ç½®æ­£ç¡® (sticky bottom-[72px])
- [ ] æŒ‰é’®æ ·å¼åŒ¹é…è®¾è®¡ (æ¸å˜èƒŒæ™¯, Sparkles å›¾æ ‡)
- [ ] ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯éƒ½æ­£ç¡®æ˜¾ç¤º

#### 2. ç ”ç©¶æµç¨‹
- [ ] ç‚¹å‡»æŒ‰é’®åæ­£ç¡®å‘èµ· SSE è¿æ¥
- [ ] ResearchButton åˆ‡æ¢ä¸º ResearchProgress
- [ ] è¿›åº¦å®æ—¶æ›´æ–°ï¼ˆ< 1 ç§’å»¶è¿Ÿï¼‰
- [ ] æ‰€æœ‰ SSE äº‹ä»¶æ­£ç¡®æ¥æ”¶ï¼ˆstart, plan, progress, done, errorï¼‰
- [ ] è¿›åº¦ç™¾åˆ†æ¯”å‡†ç¡®è®¡ç®—
- [ ] æ­¥éª¤åˆ—è¡¨æŒ‰æ—¶é—´é¡ºåºæ˜¾ç¤º

#### 3. æŠ¥å‘Šå‘é€
- [ ] done äº‹ä»¶è§¦å‘ onComplete å›è°ƒ
- [ ] sendMessage æ­£ç¡®è°ƒç”¨
- [ ] æŠ¥å‘Šæ ¼å¼æ­£ç¡® ("Research completed:\n\n...")
- [ ] æ–°æ¶ˆæ¯æ˜¾ç¤ºåœ¨èŠå¤©ä¸­
- [ ] AI æ­£ç¡®æ¥æ”¶å¹¶å¤„ç†æŠ¥å‘Š

#### 4. Artifact åˆ›å»º
- [ ] AI è°ƒç”¨ createDocument å·¥å…·
- [ ] Artifact æ­£ç¡®å±•ç¤ºæŠ¥å‘Š
- [ ] Markdown æ¸²æŸ“æ­£ç¡®
- [ ] å¤åˆ¶ã€å¯¼å‡ºåŠŸèƒ½æ­£å¸¸
- [ ] è¿½é—®å updateDocument æ­£å¸¸å·¥ä½œ

#### 5. é”™è¯¯å¤„ç†
- [ ] è¿æ¥å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
- [ ] é‡è¿æœºåˆ¶æ­£å¸¸å·¥ä½œï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
- [ ] ç”¨æˆ·å¯ä»¥é‡è¯•å¤±è´¥çš„ç ”ç©¶
- [ ] é”™è¯¯ä¸å¯¼è‡´åº”ç”¨å´©æºƒ

### ğŸ¨ UI/UX éªŒæ”¶

#### 1. è§†è§‰ä¸€è‡´æ€§
- [ ] é¢œè‰²ç³»ç»ŸåŒ¹é…ç°æœ‰ UI
- [ ] å­—ä½“å’Œå­—å·ä¸€è‡´
- [ ] é—´è·å’Œåœ†è§’ç»Ÿä¸€
- [ ] æ·±è‰²æ¨¡å¼æ­£å¸¸å·¥ä½œ

#### 2. åŠ¨ç”»æ•ˆæœ
- [ ] ResearchButton æ·¡å…¥åŠ¨ç”»æµç•…
- [ ] æŒ‰é’®ç‚¹å‡»æœ‰åé¦ˆåŠ¨ç”»
- [ ] ResearchProgress åˆ‡æ¢åŠ¨ç”»è‡ªç„¶
- [ ] è¿›åº¦æ¡å¡«å……å¹³æ»‘
- [ ] æ­¥éª¤é¡¹é€ä¸ªå‡ºç°
- [ ] Artifact å±•å¼€åŠ¨ç”»æµç•…

#### 3. å“åº”å¼è®¾è®¡
- [ ] ç§»åŠ¨ç«¯å¸ƒå±€æ­£ç¡®
- [ ] å¹³æ¿ç«¯å¸ƒå±€æ­£ç¡®
- [ ] æ¡Œé¢ç«¯å¸ƒå±€æ­£ç¡®
- [ ] Artifact æ¿€æ´»æ—¶å¸ƒå±€é€‚é…
- [ ] æ‰€æœ‰æ–­ç‚¹è¿‡æ¸¡å¹³æ»‘

#### 4. äº¤äº’ä½“éªŒ
- [ ] æŒ‰é’® hover çŠ¶æ€æ˜æ˜¾
- [ ] æŒ‰é’® disabled çŠ¶æ€æ¸…æ™°
- [ ] è¿›åº¦æ˜¾ç¤ºå®æ—¶æ›´æ–°
- [ ] å®Œæˆåè‡ªåŠ¨æ¶ˆå¤±ï¼ˆ2 ç§’ï¼‰
- [ ] ç”¨æˆ·å¯ä»¥éšæ—¶æ»šåŠ¨æ¶ˆæ¯

### âš¡ æ€§èƒ½éªŒæ”¶

#### 1. åŠ è½½æ€§èƒ½
- [ ] åˆå§‹åŠ è½½æ— æ˜æ˜¾å»¶è¿Ÿ
- [ ] ç»„ä»¶æ¸²æŸ“ < 100ms
- [ ] SSE è¿æ¥å»ºç«‹ < 2s
- [ ] æ— ä¸å¿…è¦çš„é‡æ¸²æŸ“

#### 2. è¿è¡Œæ€§èƒ½
- [ ] è¿›åº¦æ›´æ–°ä¸å¡é¡¿
- [ ] é•¿æ—¶é—´ç ”ç©¶ä¸å†…å­˜æ³„æ¼
- [ ] å¤§æŠ¥å‘Šæ¸²æŸ“æµç•…
- [ ] åŠ¨ç”»å¸§ç‡ > 30 FPS

#### 3. ç½‘ç»œæ€§èƒ½
- [ ] SSE è¿æ¥ç¨³å®š
- [ ] ç½‘ç»œä¸­æ–­è‡ªåŠ¨é‡è¿
- [ ] å¼±ç½‘ç¯å¢ƒå¯ç”¨
- [ ] è¶…æ—¶æ­£ç¡®å¤„ç†

### ğŸ§ª æµ‹è¯•è¦†ç›–

#### 1. å•å…ƒæµ‹è¯•
- [ ] detectResearchKeywords å‡½æ•°æµ‹è¯•
- [ ] extractResearchQuery å‡½æ•°æµ‹è¯•
- [ ] useResearchProgress Hook æµ‹è¯•
- [ ] äº‹ä»¶å¤„ç†é€»è¾‘æµ‹è¯•

#### 2. ç»„ä»¶æµ‹è¯•
- [ ] ResearchButton ç»„ä»¶æµ‹è¯•
- [ ] ResearchProgress ç»„ä»¶æµ‹è¯•
- [ ] ResearchPanel ç»„ä»¶æµ‹è¯•
- [ ] çŠ¶æ€åˆ‡æ¢æµ‹è¯•

#### 3. é›†æˆæµ‹è¯•
- [ ] å®Œæ•´ç ”ç©¶æµç¨‹æµ‹è¯•
- [ ] sendMessage é›†æˆæµ‹è¯•
- [ ] Artifact åˆ›å»ºæµç¨‹æµ‹è¯•
- [ ] é”™è¯¯åœºæ™¯æµ‹è¯•

#### 4. E2E æµ‹è¯•
- [ ] ç”¨æˆ·å®Œæ•´æ—…ç¨‹æµ‹è¯•
- [ ] å¤šç§ç ”ç©¶æŸ¥è¯¢æµ‹è¯•
- [ ] è¿½é—®æµç¨‹æµ‹è¯•
- [ ] è·¨æµè§ˆå™¨æµ‹è¯•

---

## é™„å½•

### ğŸ“š å‚è€ƒæ–‡æ¡£

1. [AI SDK React Documentation](https://sdk.vercel.ai/docs/reference/ai-sdk-react)
2. [Framer Motion API](https://www.framer.com/motion/)
3. [Tailwind CSS Documentation](https://tailwindcss.com/docs)
4. [fetch-event-source Library](https://github.com/Azure/fetch-event-source)
5. [Server-Sent Events Specification](https://html.spec.whatwg.org/multipage/server-sent-events.html)

### ğŸ”— ç›¸å…³æ–‡ä»¶

- `requirements.md` - åŠŸèƒ½éœ€æ±‚
- `design.md` - æŠ€æœ¯è®¾è®¡
- `tasks.md` - ä»»åŠ¡åˆ†è§£
- `ARCHITECTURE_CHANGES.md` - æ¶æ„å˜æ›´
- Phase 2 å®æ–½æŠ¥å‘Š - åç«¯ API æ–‡æ¡£

### ğŸ“Š è®¾è®¡å†³ç­–è®°å½•

#### å†³ç­– 1: åœ¨ Chat ç»„ä»¶çº§åˆ«ç®¡ç†ç ”ç©¶çŠ¶æ€

**åŸå› **:
- é›¶ä¾µå…¥æ€§ï¼Œä¸ä¿®æ”¹ç°æœ‰ç»„ä»¶
- ç›´æ¥è®¿é—® sendMessage
- æ¸…æ™°çš„æ•°æ®æµ
- æ˜“äºç»´æŠ¤

**æ›¿ä»£æ–¹æ¡ˆ**:
- é€šè¿‡ Context ä¼ é€’ sendMessage
- åœ¨ MessageActions ä¸­æ‰©å±•

**ç»“è®º**: é‡‡ç”¨ Chat ç»„ä»¶çº§åˆ«ç®¡ç†

#### å†³ç­– 2: ä½¿ç”¨ sticky å®šä½è€Œéåœ¨æ¶ˆæ¯ä¸­å†…è”

**åŸå› **:
- å§‹ç»ˆå¯è§ï¼Œç”¨æˆ·ä½“éªŒå¥½
- ä¸å½±å“æ¶ˆæ¯æ»šåŠ¨
- æ¸…æ™°çš„è§†è§‰å±‚çº§

**æ›¿ä»£æ–¹æ¡ˆ**:
- åœ¨ AI æ¶ˆæ¯åå†…è”æ˜¾ç¤º
- æ‚¬æµ®çª—æ¨¡å¼

**ç»“è®º**: é‡‡ç”¨ sticky å®šä½

#### å†³ç­– 3: ä½¿ç”¨ fetch-event-source è€ŒéåŸç”Ÿ EventSource

**åŸå› **:
- æ”¯æŒ POST æ–¹æ³•
- å†…ç½®é‡è¿æœºåˆ¶
- æ›´å¥½çš„é”™è¯¯å¤„ç†

**æ›¿ä»£æ–¹æ¡ˆ**:
- åŸç”Ÿ EventSource (ä»…æ”¯æŒ GET)
- WebSocket

**ç»“è®º**: é‡‡ç”¨ fetch-event-source

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2025-10-31
**çŠ¶æ€**: å·²æ‰¹å‡†å®æ–½
**å®¡æ ¸äºº**: [å¾…å¡«å†™]
