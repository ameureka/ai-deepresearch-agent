# 博客图表插入指南

本文档说明在博客文章的哪些位置插入哪些图表，以及插入的理由。

---

## 图表插入位置

### 📍 位置 1: 第二部分 - "深层原因：模型适配缺失" 之后

**插入图表**: 问题演进图 (图表 #1)

**插入位置**: 
```markdown
### 深层原因：模型适配缺失

继续深挖，发现了更大的问题：

[在这里插入图表 #1: 问题演进图]

**我们的系统根本没有"模型适配层"**。
```

**理由**: 
- 帮助读者理解问题的层次结构
- 可视化从表层到根本原因的分析过程
- 增强文章的逻辑性

---

### 📍 位置 2: 第二部分 - "根本原因：架构的'原罪'" 部分

**插入图表**: 当前架构 vs 目标架构对比 (图表 #2)

**插入位置**:
```markdown
### 根本原因：架构的"原罪"

画出当前的架构图，问题一目了然：

[在这里插入图表 #2: 架构对比图]

**缺失的东西**：
- ❌ 没有参数验证层
```

**理由**:
- 直观展示架构的问题
- 对比 Before/After 更有说服力
- 为后续改进方案做铺垫

---

### 📍 位置 3: 第二部分 - "更大的挑战：上下文长度限制" 部分

**插入图表**: 数据流分析图 (图表 #3)

**插入位置**:
```markdown
### 更大的挑战：上下文长度限制

即使我们把 `max_tokens` 改对了，还有一个更大的问题：

[在这里插入图表 #3: 数据流分析图]

这才是真正的挑战：**如何处理超长的上下文？**
```

**理由**:
- 时序图清晰展示数据累积过程
- 帮助读者理解为什么会超限
- 引出下一部分的解决方案

---

### 📍 位置 4: 第三部分 - "方案全景图" 之后

**插入图表**: 三种方案对比 (图表 #4)

**插入位置**:
```markdown
### 方案全景图

| 方案 | 核心思想 | 比喻 |
|------|---------|------|
[表格内容...]

[在这里插入图表 #4: 方案对比雷达图]

让我们逐一分析。
```

**理由**:
- 可视化三种方案的优劣势
- 帮助读者快速理解权衡
- 增强决策过程的说服力

---

### 📍 位置 5: 第三部分 - "我们的决策过程" 之后

**插入图表**: 分阶段实施路线图 (图表 #5)

**插入位置**:
```markdown
**最终决策**：

> "我们采用**分阶段实施策略**！"

[在这里插入图表 #5: 分阶段实施路线图]

**关键洞察**：
```

**理由**:
- Timeline 图清晰展示渐进式策略
- 帮助读者理解为什么这样选择
- 为第四部分的实践做铺垫

---

### 📍 位置 6: 第四部分 - "ModelAdapter - 参数管理的艺术" 核心代码之后

**插入图表**: ModelAdapter 工作流程 (图表 #6)

**插入位置**:
```markdown
#### 核心代码

```python
[代码示例...]
```

[在这里插入图表 #6: ModelAdapter 工作流程图]

#### 设计亮点
```

**理由**:
- 流程图补充代码说明
- 帮助读者理解自动重试逻辑
- 可视化错误恢复机制

---

### 📍 位置 7: 第四部分 - "ChunkingProcessor - 分块的艺术" 完整流程部分

**插入图表**: ChunkingProcessor 处理流程 (图表 #7)

**插入位置**:
```markdown
#### 完整流程

```python
# 使用示例
[代码示例...]
```

[在这里插入图表 #7: ChunkingProcessor 处理流程图]

---

### 量化成果：数据说话 📊
```

**理由**:
- 展示完整的分块处理流程
- 帮助读者理解并行处理逻辑
- 可视化从输入到输出的全过程

---

### 📍 位置 8: 第四部分 - "量化成果" 成本对比表格之后

**插入图表**: 成本对比柱状图 (图表 #8)

**插入位置**:
```markdown
#### 成本节省

| 任务类型 | OpenAI | DeepSeek | 节省 |
[表格内容...]

[在这里插入图表 #8: 成本对比柱状图]

**实际案例**：
```

**理由**:
- 可视化成本节省效果
- 数据更直观
- 增强说服力

---

### 📍 位置 9: 第四部分 - "性能指标" 表格之后

**插入图表**: 测试覆盖率进化 (图表 #9)

**插入位置**:
```markdown
#### 性能指标

| 指标 | Phase 1 | Phase 1.5 | 改进 |
[表格内容...]

[在这里插入图表 #9: 测试覆盖率进化图]

#### 处理时间分析
```

**理由**:
- 展示测试覆盖率的提升
- 可视化质量改进
- 强调测试的重要性

---

### 📍 位置 10: 第四部分 - "处理时间分析" 部分

**插入图表**: 处理时间对比 (图表 #12)

**插入位置**:
```markdown
#### 处理时间分析

[在这里插入图表 #12: 处理时间对比图]

```
场景 1: 短文本 (< 6K tokens)
[详细说明...]
```

**理由**:
- 可视化不同场景的性能
- 帮助读者理解开销
- 展示系统的适应性

---

### 📍 位置 11: 第四部分 - "架构演进对比" 部分

**插入图表**: 错误恢复机制流程 (图表 #10)

**插入位置**:
```markdown
### 架构演进对比

**Before (Phase 1)**:
[文字描述...]

**After (Phase 1.5)**:
[文字描述...]

[在这里插入图表 #10: 错误恢复机制状态图]

**改进点**：
```

**理由**:
- 展示增强的错误处理逻辑
- 可视化状态转换
- 强调系统的健壮性

---

### 📍 位置 12: 第五部分 - "上下文管理是 AI Agent 的核心能力" 部分

**插入图表**: 上下文管理分层架构 (图表 #11)

**插入位置**:
```markdown
#### 4. 上下文管理是 AI Agent 的核心能力

**解决方案**：

建立**分层的上下文管理**：

[在这里插入图表 #11: 上下文管理分层架构图]

```
短期上下文 (Short-term)
[详细说明...]
```

**理由**:
- 展示未来的架构设计
- 帮助读者理解分层思想
- 为 Phase 2/3 做铺垫

---

## 图表样式建议

### 颜色方案

**问题/错误**: 
- 红色系: `#ffcccc`, `#ffaaaa`

**警告/注意**:
- 黄色系: `#fff9c4`, `#ffffaa`

**成功/改进**:
- 绿色系: `#c8e6c9`, `#ccffcc`

**信息/中性**:
- 蓝色系: `#e1f5ff`, `#e3f2fd`

### 字体建议

- 标题: 14-16px, 加粗
- 正文: 12-14px, 常规
- 注释: 10-12px, 斜体

### 尺寸建议

- 宽度: 800-1000px (适合博客阅读)
- 高度: 根据内容自适应
- 最小字号: 10px (确保可读性)

---

## 导出为图片

### 方法 1: Mermaid Live Editor

1. 访问 https://mermaid.live/
2. 粘贴 Mermaid 代码
3. 点击 "Actions" → "Export SVG" 或 "Export PNG"
4. 保存到 `docs/blog/diagrams/images/` 目录

### 方法 2: Mermaid CLI

```bash
# 安装 Mermaid CLI
npm install -g @mermaid-js/mermaid-cli

# 批量转换
cd docs/blog/diagrams
mmdc -i diagram1.mmd -o images/diagram1.svg
mmdc -i diagram2.mmd -o images/diagram2.png -b transparent
```

### 方法 3: VS Code 插件

1. 安装 "Markdown Preview Mermaid Support" 插件
2. 预览 Markdown 文件
3. 右键图表 → "Copy as Image"

---

## 在不同平台使用

### GitHub / GitLab (原生支持)

直接使用 Mermaid 代码块：

\`\`\`mermaid
graph TD
    A --> B
\`\`\`

### 掘金 / 思否 (支持 Mermaid)

同样使用 Mermaid 代码块

### 知乎 / CSDN (需要图片)

1. 导出为 PNG 图片
2. 上传到平台
3. 插入图片链接

### Medium / Dev.to

1. 导出为 SVG 或 PNG
2. 上传图片
3. 使用 Markdown 图片语法：
   ```markdown
   ![图表说明](图片URL)
   ```

---

## 图表文件命名规范

```
diagram-{序号}-{简短描述}.{格式}

示例:
- diagram-01-problem-evolution.svg
- diagram-02-architecture-comparison.svg
- diagram-03-data-flow.svg
- diagram-04-solution-comparison.svg
- diagram-05-phased-roadmap.svg
- diagram-06-model-adapter-flow.svg
- diagram-07-chunking-process.svg
- diagram-08-cost-comparison.svg
- diagram-09-test-coverage.svg
- diagram-10-error-recovery.svg
- diagram-11-context-layers.svg
- diagram-12-performance-comparison.svg
```

---

## 检查清单

发布前确认：

- [ ] 所有图表已创建
- [ ] 图表样式统一
- [ ] 颜色方案一致
- [ ] 字体大小合适
- [ ] 图表清晰可读
- [ ] 已导出为所需格式
- [ ] 文件命名规范
- [ ] 已插入到正确位置
- [ ] 图表说明清晰
- [ ] 在目标平台测试显示效果

---

**创建日期**: 2025-10-31  
**维护者**: AI Research Assistant Team
