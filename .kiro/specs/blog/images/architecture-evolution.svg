<svg width="1000" height="500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 18px sans-serif; fill: #2c3e50; }
      .subtitle { font: bold 14px sans-serif; fill: #34495e; }
      .text { font: 12px sans-serif; fill: #2c3e50; }
      .component { fill: #3498db; stroke: #2980b9; stroke-width: 2; rx: 8; }
      .problem-component { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; rx: 8; }
      .solution-component { fill: #27ae60; stroke: #229954; stroke-width: 2; rx: 8; }
      .arrow { stroke: #34495e; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .problem-arrow { stroke: #e74c3c; stroke-width: 2; fill: none; marker-end: url(#problem-arrowhead); }
      .solution-arrow { stroke: #27ae60; stroke-width: 2; fill: none; marker-end: url(#solution-arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#34495e" />
    </marker>
    <marker id="problem-arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
    </marker>
    <marker id="solution-arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#27ae60" />
    </marker>
  </defs>
  
  <text x="500" y="30" text-anchor="middle" class="title">架构演进：Before vs After</text>
  
  <!-- Before Section -->
  <text x="200" y="70" text-anchor="middle" class="subtitle">Before (Phase 1) ❌</text>
  
  <rect x="100" y="90" width="200" height="50" class="problem-component"/>
  <text x="200" y="110" text-anchor="middle" fill="white" class="text">Agent Layer</text>
  <text x="200" y="125" text-anchor="middle" fill="white" class="text">research, writer, editor</text>
  
  <line x1="200" y1="150" x2="200" y2="180" class="problem-arrow"/>
  <text x="220" y="170" class="text">直接调用</text>
  
  <rect x="100" y="190" width="200" height="40" class="component"/>
  <text x="200" y="215" text-anchor="middle" fill="white" class="text">aisuite Client</text>
  
  <line x1="200" y1="240" x2="200" y2="270" class="arrow"/>
  
  <rect x="100" y="280" width="200" height="40" class="component"/>
  <text x="200" y="305" text-anchor="middle" fill="white" class="text">DeepSeek / OpenAI API</text>
  
  <text x="50" y="350" class="subtitle">问题:</text>
  <text x="50" y="370" class="text">❌ 无参数验证</text>
  <text x="50" y="385" class="text">❌ 无模型适配</text>
  <text x="50" y="400" class="text">❌ 无上下文管理</text>
  <text x="50" y="415" class="text">❌ 无错误恢复</text>
  
  <!-- VS -->
  <text x="500" y="250" text-anchor="middle" class="title" style="font-size: 24px;">VS</text>
  
  <!-- After Section -->
  <text x="750" y="70" text-anchor="middle" class="subtitle">After (Phase 1.5) ✅</text>
  
  <rect x="650" y="90" width="200" height="40" class="solution-component"/>
  <text x="750" y="115" text-anchor="middle" fill="white" class="text">Agent Layer</text>
  
  <line x1="750" y1="140" x2="750" y2="160" class="solution-arrow"/>
  
  <rect x="650" y="170" width="200" height="40" class="solution-component"/>
  <text x="750" y="195" text-anchor="middle" fill="white" class="text">ModelAdapter</text>
  
  <line x1="750" y1="220" x2="750" y2="240" class="solution-arrow"/>
  
  <rect x="650" y="250" width="200" height="40" class="solution-component"/>
  <text x="750" y="275" text-anchor="middle" fill="white" class="text">ContextManager</text>
  
  <line x1="750" y1="300" x2="750" y2="320" class="solution-arrow"/>
  
  <rect x="650" y="330" width="200" height="40" class="component"/>
  <text x="750" y="355" text-anchor="middle" fill="white" class="text">API Layer</text>
  
  <text x="600" y="390" class="subtitle">改进:</text>
  <text x="600" y="410" class="text">✅ 参数验证/调整</text>
  <text x="600" y="425" class="text">✅ 自动重试</text>
  <text x="600" y="440" class="text">✅ 智能降级</text>
  <text x="600" y="455" class="text">✅ 分块/合并</text>
  <text x="600" y="470" class="text">✅ 上下文保持</text>
  
  <text x="880" y="195" class="text">参数验证</text>
  <text x="880" y="210" class="text">自动调整</text>
  <text x="880" y="275" class="text">分块处理</text>
  <text x="880" y="290" class="text">上下文管理</text>
</svg>
