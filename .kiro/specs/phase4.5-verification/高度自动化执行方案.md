 Phase 4.5 å‰åç«¯ UI ä¸€è‡´æ€§éªŒè¯ - é«˜åº¦è‡ªåŠ¨åŒ–æ‰§è¡Œè®¡åˆ’

 ğŸ¯ éªŒè¯ç­–ç•¥ï¼šè‡ªåŠ¨åŒ–ä¼˜å…ˆ + å¤šç»´åº¦æµ‹è¯•

 åŸºäºæ‚¨çš„éœ€æ±‚ï¼Œé‡‡ç”¨ä»¥ä¸‹è‡ªåŠ¨åŒ–æµ‹è¯•æ ˆï¼š
 - âœ… Playwright E2E (webapp-testing skill)
 - âœ… è§†è§‰å›å½’æµ‹è¯• (Percy/Chromatic)
 - âœ… å¯è®¿é—®æ€§æµ‹è¯• (axe-core)
 - âœ… ç»„ä»¶å¿«ç…§æµ‹è¯• (Vitest Snapshots)
 - âœ… ç«¯åˆ°ç«¯æ•°æ®éªŒè¯ (UI â†’ Database)
 - âœ… æ€§èƒ½åˆ†æ (Lighthouse CI)

 ğŸ“‹ å››å¤§ä»»åŠ¡è¯¦è§£

 ä»»åŠ¡ 1: æ›´æ–° Phase 4 é˜¶æ®µæ€§å®Œæˆæ€»ç»“ âœï¸

 æ–‡ä»¶: .kiro/specs/phase4-deployment/phase4é˜¶æ®µæ€§å®Œæˆæ€»ç»“.md

 æ›´æ–°å†…å®¹ï¼š
 - âœ… æ ¡æ­£å®Œæˆåº¦ï¼š24/30 (80%) â†’ 26/62 (42%) ï¼ˆçœŸå®è¿›åº¦ï¼‰
 - âœ… è¡¥å……ä»Šæ—¥æˆæœï¼šæ•°æ®åº“é…ç½®ã€æœåŠ¡å¯åŠ¨ã€SSE API éªŒè¯
 - âœ… åŒºåˆ†çŠ¶æ€ï¼šå·²å®ç° vs å·²æµ‹è¯• vs æœªæµ‹è¯•
 - âœ… æ·»åŠ "è‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–ç‡"ç« èŠ‚ï¼ˆå½“å‰ 0%ï¼‰
 - âœ… æ›´æ–°æ—¶é—´çº¿ï¼šPhase 4 å®é™…è¿›åº¦ vs Phase 4.5 è§„åˆ’

 ---
 ä»»åŠ¡ 2: ä¼˜åŒ– tasks.md å¹¶åˆ¶å®šéªŒè¯è·¯çº¿å›¾ ğŸ“Š

 æ–‡ä»¶: .kiro/specs/phase4-deployment/tasks.md

 ä¼˜åŒ–å†…å®¹ï¼š
 1. é‡æ–°åˆ†ç±»ä»»åŠ¡ï¼š
   - âœ… å·²å®Œæˆå¹¶éªŒè¯ (26 tasks)
   - âš ï¸ å·²å®ç°ä½†æœªæµ‹è¯• (UI ç»„ä»¶ã€API é›†æˆ)
   - â³ æœªå¼€å§‹ (ç”Ÿäº§éƒ¨ç½²ã€ç›‘æ§)
 2. æ–°å¢è‡ªåŠ¨åŒ–æµ‹è¯•ä»»åŠ¡ï¼š
 10.2.7 ResearchPanel ç»„ä»¶å¿«ç…§æµ‹è¯• (Vitest)
 10.2.8 è§†è§‰å›å½’æµ‹è¯•é…ç½® (Percy)
 10.3.7 E2E ç ”ç©¶æµç¨‹æµ‹è¯• (Playwright + webapp-testing skill)
 10.3.8 å¯è®¿é—®æ€§æµ‹è¯• (axe-core)
 10.3.9 ç«¯åˆ°ç«¯æ•°æ®éªŒè¯æµ‹è¯• (UI â†’ DB)
 10.4.1 æ€§èƒ½åŸºå‡†æµ‹è¯• (Lighthouse CI)
 3. å®šä¹‰ä¸‹ä¸€é˜¶æ®µä¼˜å…ˆçº§ï¼š
   - ğŸ”´ P0 (æœ¬å‘¨): è‡ªåŠ¨åŒ– E2E æµ‹è¯• + æ•°æ®éªŒè¯
   - ğŸŸ¡ P1 (ä¸‹å‘¨): è§†è§‰å›å½’ + æ€§èƒ½æµ‹è¯• + ç”Ÿäº§éƒ¨ç½²
   - ğŸŸ¢ P2 (åç»­): ç›‘æ§ã€æ–‡æ¡£ã€ä¼˜åŒ–

 ---
 ä»»åŠ¡ 3: åˆ›å»ºè‡ªåŠ¨åŒ–æµ‹è¯•è®¾è®¡æ–¹æ¡ˆ ğŸ¤–

 æ–‡ä»¶: .kiro/specs/phase4-deployment/TESTING_PLAN.md

 å†…å®¹ç»“æ„ï¼š

 3.1 æµ‹è¯•é‡‘å­—å¡”æ¶æ„

            E2E Tests (Playwright)           â† 15 ä¸ªæ ¸å¿ƒæµç¨‹æµ‹è¯•
         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        Integration Tests (API)              â† 20 ä¸ª API é›†æˆæµ‹è¯•
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Component Tests (Vitest + Snapshots)     â† 30+ ç»„ä»¶å•å…ƒæµ‹è¯•
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 Visual Regression (Percy) + A11y (axe-core) â† æŒç»­è¿è¡Œ

 3.2 Playwright E2E æµ‹è¯•å¥—ä»¶ï¼ˆä½¿ç”¨ webapp-testing skillï¼‰

 æµ‹è¯•æ–‡ä»¶: tests/e2e/research-workflow.spec.ts

 15 ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•åœºæ™¯ï¼š
 1. âœ… ç”¨æˆ·ç™»å½• â†’ å‘é€ç ”ç©¶è¯·æ±‚ â†’ ResearchButton å‡ºç°
 2. âœ… ç‚¹å‡» "Start Research" â†’ ResearchProgress æ˜¾ç¤º
 3. âœ… SSE äº‹ä»¶æµ â†’ Progress æ›´æ–° (0% â†’ 100%)
 4. âœ… ç ”ç©¶å®Œæˆ â†’ Artifact è‡ªåŠ¨åˆ›å»º
 5. âœ… æ•°æ®åº“éªŒè¯ â†’ research_tasks è¡¨æ–°å¢è®°å½•
 6. âœ… è¿›åº¦äº‹ä»¶éªŒè¯ â†’ progress JSONB å­—æ®µæ­£ç¡®
 7. âœ… æŠ¥å‘ŠæŒä¹…åŒ– â†’ report å­—æ®µå­˜å‚¨å®Œæ•´å†…å®¹
 8. âœ… é”™è¯¯å¤„ç† â†’ ç½‘ç»œæ–­å¼€å Retry æŒ‰é’®
 9. âœ… å–æ¶ˆç ”ç©¶ â†’ Cancel æŒ‰é’®åŠŸèƒ½
 10. âœ… Follow-up é—®é¢˜ â†’ updateDocument è°ƒç”¨
 11. âœ… å¤šç ”ç©¶ä»»åŠ¡ â†’ å¹¶å‘å¤„ç†å’Œéš”ç¦»
 12. âœ… å“åº”å¼å¸ƒå±€ â†’ ç§»åŠ¨ç«¯ UI é€‚é…
 13. âœ… æš—è‰²æ¨¡å¼ â†’ ä¸»é¢˜åˆ‡æ¢æµ‹è¯•
 14. âœ… å¯è®¿é—®æ€§ â†’ é”®ç›˜å¯¼èˆªã€ARIA æ ‡ç­¾
 15. âœ… æ€§èƒ½æŒ‡æ ‡ â†’ SSE å»¶è¿Ÿ < 500ms

 3.3 è§†è§‰å›å½’æµ‹è¯•ï¼ˆPercy/Chromaticï¼‰

 è‡ªåŠ¨æˆªå›¾å¯¹æ¯”ç‚¹ï¼ˆåŸºäº UI_DESIGN_REPORT.mdï¼‰ï¼š
 - ResearchButton: idle, hover, disabled, loading å››ç§çŠ¶æ€
 - ResearchProgress: 0%, 50%, 100%, error å››ç§è¿›åº¦
 - ResearchPanel: å±•å¼€/æ”¶èµ·åŠ¨ç”»çš„ 5 ä¸ªå…³é”®å¸§
 - ç§»åŠ¨ç«¯/æ¡Œé¢ç«¯å“åº”å¼å¸ƒå±€å¯¹æ¯”

 3.4 å¯è®¿é—®æ€§æµ‹è¯•ï¼ˆaxe-coreï¼‰

 è‡ªåŠ¨åŒ–æ£€æŸ¥é¡¹ï¼š
 - WCAG 2.1 AA çº§åˆè§„æ€§
 - é¢œè‰²å¯¹æ¯”åº¦ â‰¥ 4.5:1
 - ARIA æ ‡ç­¾å®Œæ•´æ€§
 - é”®ç›˜å¯¼èˆªæ”¯æŒ
 - å±å¹•é˜…è¯»å™¨å…¼å®¹æ€§

 3.5 ç»„ä»¶å¿«ç…§æµ‹è¯•ï¼ˆVitestï¼‰

 æµ‹è¯•æ–‡ä»¶: tests/components/*.test.tsx
 - ResearchButton 10 ç§ props ç»„åˆå¿«ç…§
 - ResearchProgress 15 ç§çŠ¶æ€å¿«ç…§
 - ResearchPanel 8 ç§åœºæ™¯å¿«ç…§

 3.6 ç«¯åˆ°ç«¯æ•°æ®éªŒè¯æµç¨‹

 // Playwright æµ‹è¯• + æ•°æ®åº“æŸ¥è¯¢
 test('ç ”ç©¶å®Œæˆåæ•°æ®åº“æ­£ç¡®å­˜å‚¨', async ({ page }) => {
   // 1. UI æ“ä½œ
   await page.click('[data-testid="research-button"]');
   await page.waitForSelector('[data-testid="research-done"]');

   // 2. è·å– taskId
   const taskId = await page.getAttribute('[data-testid="task-id"]', 'value');

   // 3. æŸ¥è¯¢æ•°æ®åº“ï¼ˆä½¿ç”¨ Neon serverless driverï¼‰
   const task = await db.query(`
     SELECT * FROM research_tasks WHERE task_id = $1
   `, [taskId]);

   // 4. éªŒè¯æ•°æ®
   expect(task.status).toBe('completed');
   expect(task.report).toContain('ç ”ç©¶æŠ¥å‘Š');
   expect(task.progress.completedSteps).toBe(task.progress.totalSteps);
 });

 3.7 æ€§èƒ½æµ‹è¯•ï¼ˆLighthouse CIï¼‰

 è‡ªåŠ¨åŒ–æŒ‡æ ‡é‡‡é›†ï¼š
 - Core Web Vitals (LCP < 2.5s, FID < 100ms, CLS < 0.1)
 - Time to Interactive < 3s
 - SSE è¿æ¥å»ºç«‹æ—¶é—´ < 500ms
 - Research å®Œæ•´æµç¨‹ < 3min

 ---
 ä»»åŠ¡ 4: åˆ›å»º Phase 4.5 éªŒè¯è§„èŒƒ ğŸ“

 ç›®å½•: .kiro/specs/phase4.5-verification/

 4.1 requirements.md - éªŒè¯éœ€æ±‚

 å…³é”®éœ€æ±‚ï¼š
 - REQ-1: E2E æµ‹è¯•è¦†ç›–ç‡ â‰¥ 80%
 - REQ-2: ç»„ä»¶æµ‹è¯•è¦†ç›–ç‡ â‰¥ 90%
 - REQ-3: è§†è§‰å›å½’æµ‹è¯•é€šè¿‡ç‡ 100%
 - REQ-4: å¯è®¿é—®æ€§é›¶ç¼ºé™·
 - REQ-5: æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡ç‡ â‰¥ 95%
 - REQ-6: ç«¯åˆ°ç«¯æ•°æ®ä¸€è‡´æ€§ 100%

 4.2 design.md - æµ‹è¯•æ¶æ„

 æŠ€æœ¯æ ˆï¼š
 E2E æµ‹è¯•:
   - Playwright 1.40+
   - webapp-testing skill (MCP)
   - @playwright/test

 è§†è§‰å›å½’:
   - Percy CLI (æ¨è) æˆ– Chromatic
   - åŸºå‡†æˆªå›¾å­˜å‚¨åœ¨ Git LFS

 å¯è®¿é—®æ€§:
   - axe-core 4.8+
   - @axe-core/playwright

 ç»„ä»¶æµ‹è¯•:
   - Vitest 1.0+
   - @testing-library/react
   - Snapshot testing

 æ•°æ®éªŒè¯:
   - @neondatabase/serverless (è¿æ¥ Neon DB)
   - pg (PostgreSQL å®¢æˆ·ç«¯)

 æ€§èƒ½æµ‹è¯•:
   - @lhci/cli (Lighthouse CI)
   - è‡ªå®šä¹‰ Performance Observer

 æŠ¥å‘Šç”Ÿæˆ:
   - Playwright HTML Reporter
   - Istanbul/c8 (è¦†ç›–ç‡)
   - è‡ªå®šä¹‰ Markdown æŠ¥å‘Šæ¨¡æ¿

 4.3 tasks.md - 15 å¤©éªŒè¯è®¡åˆ’

 Week 1: è‡ªåŠ¨åŒ–æµ‹è¯•åŸºç¡€è®¾æ–½ (Day 1-5)
 - Day 1: é…ç½® Playwright + webapp-testing skill
 - Day 2: é…ç½® Percy + axe-core + Vitest
 - Day 3: ç¼–å†™ 15 ä¸ª E2E æµ‹è¯•ç”¨ä¾‹
 - Day 4: ç¼–å†™ç»„ä»¶å¿«ç…§æµ‹è¯•ï¼ˆ30+ ä¸ªï¼‰
 - Day 5: é…ç½® CI/CD è‡ªåŠ¨åŒ–æµ‹è¯•

 Week 2: æ‰§è¡Œæµ‹è¯•ä¸ä¿®å¤ (Day 6-10)
 - Day 6: è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ï¼Œè®°å½•å¤±è´¥ç”¨ä¾‹
 - Day 7-8: ä¿®å¤å‘ç°çš„ Bug å’Œä¸ä¸€è‡´
 - Day 9: è¡¥å……è¾¹ç¼˜åœºæ™¯æµ‹è¯•
 - Day 10: æ€§èƒ½ä¼˜åŒ–å’Œ Lighthouse æµ‹è¯•

 Week 3: ç”Ÿäº§éƒ¨ç½²ä¸éªŒè¯ (Day 11-15)
 - Day 11: éƒ¨ç½²åˆ° Vercel Preview ç¯å¢ƒ
 - Day 12: åœ¨ Preview ç¯å¢ƒè¿è¡Œå®Œæ•´æµ‹è¯•
 - Day 13: ç”Ÿäº§ç¯å¢ƒéƒ¨ç½² (Render + Vercel)
 - Day 14: ç”Ÿäº§ç¯å¢ƒå†’çƒŸæµ‹è¯•
 - Day 15: ç”ŸæˆéªŒè¯æŠ¥å‘Šï¼Œå½’æ¡£æµ‹è¯•ç»“æœ

 4.4 VERIFICATION_REPORT.md - æŠ¥å‘Šæ¨¡æ¿

 æŠ¥å‘Šå†…å®¹ï¼š
 1. æ‰§è¡Œæ‘˜è¦ï¼ˆé€šè¿‡ç‡ã€å¤±è´¥ç”¨ä¾‹æ•°ï¼‰
 2. æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šï¼ˆHTML é“¾æ¥ï¼‰
 3. æ€§èƒ½åˆ†æï¼ˆLighthouse æŠ¥å‘Šï¼‰
 4. è§†è§‰å›å½’å¯¹æ¯”ï¼ˆPercy Dashboard é“¾æ¥ï¼‰
 5. å¯è®¿é—®æ€§å®¡è®¡ç»“æœ
 6. å·²çŸ¥é—®é¢˜åˆ—è¡¨
 7. ä¸‹ä¸€æ­¥å»ºè®®

 ---
 ğŸš€ æ‰§è¡Œæµç¨‹

 é˜¶æ®µ 1: æ–‡æ¡£æ›´æ–°ï¼ˆé¢„è®¡ 1 å°æ—¶ï¼‰

 1. æ›´æ–° phase4é˜¶æ®µæ€§å®Œæˆæ€»ç»“.mdï¼ˆçœŸå®è¿›åº¦ï¼‰
 2. ä¼˜åŒ– tasks.mdï¼ˆé‡æ–°åˆ†ç±» + æ–°å¢æµ‹è¯•ä»»åŠ¡ï¼‰

 é˜¶æ®µ 2: æµ‹è¯•æ–¹æ¡ˆè®¾è®¡ï¼ˆé¢„è®¡ 2 å°æ—¶ï¼‰

 3. åˆ›å»º TESTING_PLAN.mdï¼ˆè¯¦ç»†æµ‹è¯•è®¾è®¡ï¼‰
 4. åˆ›å»º Phase 4.5 è§„èŒƒç›®å½• + 4 ä¸ªæ–‡ä»¶

 é˜¶æ®µ 3: è‡ªåŠ¨åŒ–éªŒè¯ï¼ˆåç»­æ‰§è¡Œï¼‰

 5. é…ç½®æµ‹è¯•å·¥å…·æ ˆ
 6. ä½¿ç”¨ webapp-testing skill ç¼–å†™ E2E æµ‹è¯•
 7. è¿è¡Œæµ‹è¯•å¹¶ç”ŸæˆæŠ¥å‘Š

 ---
 ğŸ“Š é¢„æœŸæˆæœ

 æ›´æ–°çš„æ–‡æ¡£ï¼š

 - âœ… phase4é˜¶æ®µæ€§å®Œæˆæ€»ç»“.md - çœŸå®è¿›åº¦è¿½è¸ª
 - âœ… tasks.md - ä¼˜åŒ–ä»»åŠ¡åˆ†ç±» + éªŒè¯è·¯çº¿å›¾

 æ–°å»ºçš„æ–‡æ¡£ï¼š

 - âœ… TESTING_PLAN.md - è‡ªåŠ¨åŒ–æµ‹è¯•è®¾è®¡æ–¹æ¡ˆ
 - âœ… phase4.5-verification/requirements.md - éªŒè¯éœ€æ±‚
 - âœ… phase4.5-verification/design.md - æµ‹è¯•æ¶æ„
 - âœ… phase4.5-verification/tasks.md - 15 å¤©éªŒè¯è®¡åˆ’
 - âœ… phase4.5-verification/VERIFICATION_REPORT.md - æŠ¥å‘Šæ¨¡æ¿

 è‡ªåŠ¨åŒ–æµ‹è¯•èµ„äº§ï¼š

 - ğŸ“ 15 ä¸ª Playwright E2E æµ‹è¯•è„šæœ¬ï¼ˆè®¾è®¡æ–‡æ¡£ï¼‰
 - ğŸ“ 30+ ç»„ä»¶å¿«ç…§æµ‹è¯•è®¾è®¡
 - ğŸ“ è§†è§‰å›å½’æµ‹è¯•åŸºå‡†ç‚¹
 - ğŸ“ å¯è®¿é—®æ€§æ£€æŸ¥é…ç½®
 - ğŸ“ ç«¯åˆ°ç«¯æ•°æ®éªŒè¯æµç¨‹

 ---
 âœ¨ å…³é”®æ”¹è¿›ç‚¹

 1. å……åˆ†åˆ©ç”¨ webapp-testing skillï¼šä½¿ç”¨ Playwright è‡ªåŠ¨åŒ–æ‰€æœ‰ UI äº¤äº’
 2. ç«¯åˆ°ç«¯æ•°æ®éªŒè¯ï¼šUI æ“ä½œåè‡ªåŠ¨æŸ¥è¯¢ Neon æ•°æ®åº“éªŒè¯
 3. å¤šç»´åº¦è´¨é‡ä¿éšœï¼šåŠŸèƒ½ + è§†è§‰ + æ€§èƒ½ + å¯è®¿é—®æ€§
 4. è‡ªåŠ¨åŒ–æŠ¥å‘Šç”Ÿæˆï¼šHTML + Markdown + æ€§èƒ½åˆ†æ
 5. åŸºäºçœŸå® UI è®¾è®¡ï¼šæ‰€æœ‰æµ‹è¯•ç‚¹å¯¹åº” UI_DESIGN_REPORT.md

 æ‚¨åŒæ„è¿™ä¸ªé«˜åº¦è‡ªåŠ¨åŒ–çš„æ–¹æ¡ˆå—ï¼Ÿ
â•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œâ•Œ